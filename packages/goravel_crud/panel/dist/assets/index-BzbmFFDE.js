import{d as L,r as D,a as w,_ as N,b as O,o as r,c as y,w as a,e as I,f as S,t as $,g as v,F as T,h as R,i as A,j as B,k as K,l as x,u as z,m as h,n as E,p as i,M,q as F,A as J,D as U,S as V,s as H,v as q,T as G,x as P,L as Q,y as W,B as X,z as Y,C as Z,E as ee}from"./index-Czh94q_C.js";const j=L("adminMenu",{state:()=>({menus:[],selectedKeys:[],openKeys:[]}),actions:{routeTo(t){this.selectedKeys=[t],t!=""&&D.push({name:t})}}}),te=w({name:"SubMenu",props:{menuInfo:{type:Object,default:()=>({})}},setup(){return{}}});function ne(t,u,m,p,s,o){const l=A,d=O("sub-menu",!0),f=B;return r(),y(f,{key:t.menuInfo.name},{icon:a(()=>{var e;return[(r(),y(I((e=t.menuInfo.meta)==null?void 0:e.menu.icon)))]}),title:a(()=>{var e;return[S($((e=t.menuInfo.meta)==null?void 0:e.title),1)]}),default:a(()=>[(r(!0),v(T,null,R(t.menuInfo.children,e=>(r(),v("div",{key:e.name},[e.children?(r(),y(d,{key:1,"menu-info":e},null,8,["menu-info"])):(r(),y(l,{key:e.name},{default:a(()=>{var b;return[S($((b=e.meta.menu)==null?void 0:b.title),1)]}),_:2},1024))]))),128))]),_:1})}const oe=N(te,[["render",ne]]),se=w({components:{SubMenu:oe},setup(t,{expose:u}){const m=n=>{let _=[];n.forEach(c=>{var g;((g=c.meta.menu)==null?void 0:g.show)===!1&&_.push(c),c.children&&m(c.children)}),_.forEach(c=>{const g=n.indexOf(c);n.splice(g,1)})},p=K[0].children.filter(n=>n.path.split("/").length==4).filter(n=>n.children.length==0).filter(n=>n.path.includes("admin"));m(K[0].children);let s=[...p,...K[0].children];const o=j();o.menus=s;const l=x(s),d=z();o.selectedKeys=[d.name];const f=n=>{let _=[],c=n.slice(0,2).join(".");_.push(c);for(let g=0;g<n.length-2;g++)c+="."+n[g+2],_.push(c);return _};(()=>{let n=d.name;if(n.split(".").length==2&&(o.openKeys=[n]),n.split(".").length>2){const _=n.split(".");let c=f(_);o.openKeys=c}})();const b=n=>{o.routeTo(n.key)},C=n=>{if(n.length>0){const _=n[n.length-1];if(_.split(".").length==2){o.openKeys=[_];return}if(_.split(".").length>2){const c=_.split(".");let g=f(c);o.openKeys=g;return}}},k=x(!0);return u({active:k}),{active:k,routeTo:b,new_rts:l,onOpenChange:C,menuStore:o}}}),ae="/dist/assets/logo2-i5ajEMNo.png",le={class:"logo"};function ie(t,u,m,p,s,o){const l=A,d=O("sub-menu"),f=M;return r(),v("div",null,[h("div",le,[u[2]||(u[2]=h("img",{src:ae,style:{width:"64px","border-radius":"23px"},alt:""},null,-1)),h("span",{class:E([t.active==!0?"block":"hidden","sys-title"])},"懒人CRUD",2)]),i(f,{mode:"inline",theme:"dark",onClick:t.routeTo,"open-keys":t.menuStore.openKeys,"onUpdate:openKeys":u[0]||(u[0]=e=>t.menuStore.openKeys=e),selectedKeys:t.menuStore.selectedKeys,"onUpdate:selectedKeys":u[1]||(u[1]=e=>t.menuStore.selectedKeys=e)},{default:a(()=>[(r(!0),v(T,null,R(t.new_rts,e=>(r(),v(T,{key:e.name},[e.children&&e.children.length===0?(r(),y(l,{key:e.name},{icon:a(()=>[(r(),y(I(e.meta&&e.meta.menu&&e.meta.menu.icon?e.meta.menu.icon:"AppstoreAddOutlined")))]),default:a(()=>[S(" "+$(e.meta.menu.title),1)]),_:2},1024)):(r(),y(d,{key:1,"menu-info":e},null,8,["menu-info"]))],64))),128))]),_:1},8,["onClick","open-keys","selectedKeys"])])}const re=N(se,[["render",ie]]),ue=()=>{function t(p,s,o){let l={data:s,expire:o};o&&(l.expire=new Date().getTime()+o*1e3),localStorage.setItem(p,JSON.stringify(l))}function u(p,s=null){const o=localStorage.getItem(p);if(o){const l=JSON.parse(o),d=l==null?void 0:l.expire;return d&&d<new Date().getTime()?(localStorage.removeItem(p),s):l.data}return s}function m(p){localStorage.removeItem(p)}return{set:t,get:u,remove:m}},ce={class:"flex justify-between h-full items-stretch bg-white"},pe={class:"flex justify-end items-center relative",style:{width:"300px"}},de=w({__name:"navbar",setup(t){j(),x("");const u=ue();JSON.parse(u.get("user"));const m=()=>{localStorage.clear(),D.push({name:"auth.login"})};return(p,s)=>{const o=J,l=A,d=M,f=U,e=V;return r(),v("div",ce,[s[2]||(s[2]=h("div",{class:"text-lg font-bold",style:{"line-height":"64px"}}," 懒人面板 ",-1)),h("div",pe,[i(e,{size:24},{default:a(()=>[i(f,{trigger:["hover"],placement:"bottom",arrow:""},{overlay:a(()=>[i(d,null,{default:a(()=>[i(l,{onClick:m,key:"1"},{default:a(()=>s[1]||(s[1]=[S("退出登录")])),_:1})]),_:1})]),default:a(()=>[h("a",{class:"ant-dropdown-link",onClick:s[0]||(s[0]=F(()=>{},["prevent"]))},[i(o,{src:"https://xsgames.co/randomusers/avatar.php?g=pixel&key=1"})])]),_:1})]),_:1})])])}}}),_e=L("loading",{state:()=>({loading:!1}),getters:{getLoading(t){return t.loading}},actions:{setLoading(t){this.loading=t},closeLoading(){this.loading=!1}}}),me=L("tips",{state:()=>({tips:""}),getters:{getTips(t){return t.tips}},actions:{setTips(t){this.tips=t},clearTips(){this.tips=""}}}),fe={id:"admin_content",style:{padding:"15px 15px","box-sizing":"border-box"}},ge={style:{"background-color":"white","min-height":"800px",padding:"5px","box-sizing":"border-box"}},he={key:0,class:"absolute top-1/2 left-1/2"},ve=w({__name:"index",setup(t){const u=_e();me();const m=x(),p=(s,o)=>{m.value.active=!m.value.active};return(s,o)=>{const l=Q,d=W,f=O("router-view"),e=X,b=Y,C=Z,k=P,n=ee;return r(),v("main",null,[i(k,{style:{"min-height":"100vh"}},{default:a(()=>[i(l,{collapsible:"",onCollapse:p,width:"240"},{default:a(()=>[i(re,{ref_key:"triggleRef",ref:m},null,512)]),_:1}),i(k,null,{default:a(()=>[i(d,{class:"shadow-md",style:{background:"#fff",height:"64px","padding-inline":"20px"}},{default:a(()=>[i(de)]),_:1}),i(b,{style:{position:"relative"},class:"layout-content"},{default:a(()=>[h("div",fe,[h("section",ge,[i(f)]),o[0]||(o[0]=h("div",{id:"spinDiv"},null,-1))]),i(e)]),_:1}),i(C,{style:{"text-align":"center"}},{default:a(()=>o[1]||(o[1]=[h("div",{class:"text-black text-xs"}," 管理 ©2025-2027 Created by HuluTech ",-1)])),_:1})]),_:1})]),_:1}),(r(),y(G,{to:"body"},[H(u).getLoading?(r(),v("div",he,[i(n,{size:"large"})])):q("",!0)]))])}}});export{ve as default};
