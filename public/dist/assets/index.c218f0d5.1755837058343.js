import{J as ce,j as ge,B as ye,f as be,g as ke,K as xe,L as oe,e as Ce,N as we,O as Se,d as Ie,q as Me,P as Le,x as Ue,o as $e,Q as Be,U as Ve,c as Ae,R as Oe,p as Te,F as Ne,n as ze}from"./ant-design-vue.093c2994.1755837058343.js";import{k as Q,a as B,Z as y,_ as N,$ as z,F as R,a7 as le,S as De,a2 as L,a4 as J,I as a,f as H,a5 as ae,r as k,a1 as ie,a3 as l,c as o,a0 as W,G as Fe,aj as Z,u as q,J as qe,e as Re,w as te,d as Pe,A as je,z as Ee}from"./@vue.f517c4d3.1755837058343.js";import{a as se,e as Ge,c as Ke,A as F,f as he}from"./index-9f5b82c4.js";import{l as We}from"./lodash.9c8377e1.1755837058343.js";import{al as ne}from"./@ant-design.a965c5d8.1755837058343.js";import"./@babel.ff5fac95.1755837058343.js";import"./resize-observer-polyfill.0f9f8adb.1755837058343.js";import"./vue-types.ef06c517.1755837058343.js";import"./@ctrl.110cde02.1755837058343.js";import"./dom-align.ecb06dd6.1755837058343.js";import"./lodash-es.3d27f5e2.1755837058343.js";import"./dayjs.0af4a9d6.1755837058343.js";import"./async-validator.dee29e8b.1755837058343.js";import"./scroll-into-view-if-needed.a4366a34.1755837058343.js";import"./compute-scroll-into-view.183f845a.1755837058343.js";import"./vue-router.b78d424e.1755837058343.js";import"./pinia.b2fb4753.1755837058343.js";import"./vue-demi.71ba0ef2.1755837058343.js";import"./axios.dcb3bfcc.1755837058343.js";import"./qs.f1dbb4de.1755837058343.js";import"./side-channel.e74edad8.1755837058343.js";import"./es-errors.c75f5a96.1755837058343.js";import"./object-inspect.10b59ea0.1755837058343.js";import"./side-channel-list.d95ec71c.1755837058343.js";import"./side-channel-map.727b5c6c.1755837058343.js";import"./get-intrinsic.b695205f.1755837058343.js";import"./es-object-atoms.11ea1ab9.1755837058343.js";import"./math-intrinsics.9389030e.1755837058343.js";import"./gopd.30775706.1755837058343.js";import"./es-define-property.27915812.1755837058343.js";import"./has-symbols.76fb15e9.1755837058343.js";import"./get-proto.54906464.1755837058343.js";import"./dunder-proto.03a5174c.1755837058343.js";import"./call-bind-apply-helpers.5997cf20.1755837058343.js";import"./function-bind.48f717dc.1755837058343.js";import"./hasown.2ed669e5.1755837058343.js";import"./call-bound.b2d31275.1755837058343.js";import"./side-channel-weakmap.a20c0f7d.1755837058343.js";import"./stepin.c86fd983.1755837058343.js";import"./enquire.js.29d23a08.1755837058343.js";import"./js-cookie.df2f1d76.1755837058343.js";import"./@vueuse.3525a1c0.1755837058343.js";import"./clipboard.b10d7115.1755837058343.js";import"./highlight.js.e4b3eeb1.1755837058343.js";import"./nprogress.a75463f1.1755837058343.js";import"./vxe-table.b2828993.1755837058343.js";import"./xe-utils.6b830ca1.1755837058343.js";import"./@vxe-ui.8e5d7a27.1755837058343.js";import"./dom-zindex.d72a3c32.1755837058343.js";import"./vue.018b2131.1755837058343.js";import"./vxe-pc-ui.77ca94e9.1755837058343.js";import"./vue-pick-colors.89b8db5f.1755837058343.js";import"./@popperjs.f3391c26.1755837058343.js";const Je=Q({__name:"GridList",props:{pagination:{type:[Object,Boolean]},column:{type:Number,default:8},gap:[Array,Number],dataSource:{type:Array,default:[]}},setup(b){const c=b,v=B(()=>c.pagination&&typeof c.pagination=="boolean"?{}:c.pagination??{}),U=B(()=>{var t,w;if(typeof c.pagination=="boolean"&&!c.pagination)return(t=c.dataSource)==null?void 0:t.slice(0);const{current:x=1,pageSize:_=10}=v.value;let g=0,C=_;return c.dataSource.length>_&&(g=(x-1)*_,C=x*_),(w=c.dataSource)==null?void 0:w.slice(g,C)}),V=B(()=>U.value.length>0?c.column:1);return(x,_)=>{var t;const g=ge,C=ce;return y(),N(R,null,[z("div",J(x.$attrs,{class:"grid-list grid",style:`${b.column?"grid-template-columns:repeat("+V.value+", minmax(0, 1fr))":""}`}),[U.value.length>0?(y(!0),N(R,{key:0},le(U.value,w=>De(x.$slots,"renderItem",{item:w},()=>[a(ae(w),1)],!0)),256)):(y(),L(g,{key:1}))],16),_[0]||(_[0]=a()),b.pagination?(y(),L(C,J({key:0,class:"mt-3"},{total:(t=b.dataSource)==null?void 0:t.length,...b.pagination}),null,16)):H("",!0)],64)}}});const Ze=se(Je,[["__scopeId","data-v-7f13cee3"]]),Qe=["onClick"],He={class:"mx-0.5 bg-bg-disabled p-1 rounded-sm flex items-center cursor-pointer"},Xe=Q({__name:"IconSelector",props:{mode:{type:String,default:"multiple"},value:{type:[Array,String,Number],default(b){b.mode==="multiple"||b.mode}},column:{type:Number,default:8},placeholder:{type:String,default:"选择图标，输入文字搜索..."},options:{type:[Array,Array],default:[]}},emits:["update:value"],setup(b,{emit:c}){var D;const v=b,U=c,V={pageSize:v.column*5,hideOnSinglePage:!0,showSizeChanger:!1,size:"small"},x=k(!1),_=B(()=>v.mode==="multiple"),g=B(()=>v.options.length===0||v.options[0].title!==void 0?v.options.map(s=>({...s,_current:k(1),_searchList:s.list})):[{title:"全部图标",key:"__dft",list:v.options,_current:k(1),_searchList:[...v.options]}]),C=B(()=>{const s=new Map;return g.value.flatMap(i=>i.list).forEach(i=>{s.set(i.value,i)}),s}),{value:t}=Ge(()=>Array.isArray(v.value)||v.value===void 0?v.value:[v.value],s=>U("update:value",_.value?s:s==null?void 0:s[0]));function w(s){var n;(((n=t.value)==null?void 0:n.indexOf(s.value))??-1)===-1?t.value=_.value?[...t.value??[],s.value]:[s.value]:_.value&&S(s.value),_.value||(x.value=!1),M.value="",A("")}function S(s){var n,e;(((n=t.value)==null?void 0:n.findIndex(m=>m===s))??-1)>=0&&(t.value=(e=t.value)==null?void 0:e.filter(m=>m!==s))}function A(s){const i=s==="",n=g.value.find(p=>p.key===f.value),e=new RegExp(s.toLowerCase()),m=(p,$)=>$.filter(I=>p.test(I.label.toLocaleLowerCase()));n._searchList=i?[...n.list]:m(e,n.list),setTimeout(()=>{g.value.filter(p=>p!==n).forEach(p=>{p._searchList=i?[...p.list]:m(e,p.list)})}),T.value=!1}const P=We.debounce(A,300);function O(s){M.value=s,T.value=!0,P(s)}const f=k((D=g.value[0])==null?void 0:D.key),M=k(""),T=k(!1);function j(s){var i;return(i=t.value)==null?void 0:i.includes(s.value)}return(s,i)=>{const n=ye,e=be,m=ke,p=xe,$=ie("CloseOutlined"),I=oe;return y(),L(I,J({onClick:i[2]||(i[2]=()=>x.value=!0),showSearch:!0,mode:"multiple",value:q(t),"onUpdate:value":i[3]||(i[3]=u=>qe(t)?t.value=u:null),open:x.value,onBlur:i[4]||(i[4]=()=>x.value=!1),onSearch:O,searchValue:M.value},{placeholder:b.placeholder},{"allow-clear":""}),{dropdownRender:l(()=>[o(p,{tip:"搜索中...",spinning:T.value},{default:l(()=>[o(m,{activeKey:f.value,"onUpdate:activeKey":i[0]||(i[0]=u=>f.value=u),class:W(["icon-selector","px-base","pb-base",{"no-group pt-[12px]":g.value.length===1&&g.value[0].key==="__dft"}]),onMousedown:i[1]||(i[1]=Fe(()=>{},["prevent"]))},{default:l(()=>[(y(!0),N(R,null,le(g.value,u=>(y(),L(e,{key:u.key},{tab:l(()=>[o(n,{class:W({"text-primary-500":f.value===u.key}),count:u._searchList.length===u.list.length?void 0:u._searchList.length,showZero:""},{default:l(()=>[a(ae(u.title),1)]),_:2},1032,["class","count"])]),default:l(()=>[i[5]||(i[5]=a()),o(Ze,{class:"icon-container",dataSource:u._searchList,column:b.column,pagination:{...V,current:u._current.value,"onUpdate:current":d=>u._current.value=d}},{renderItem:l(({item:d})=>[z("div",{onClick:E=>w(d),class:W(`icon-item bg-container cursor-pointer h-10 w-10 flex justify-center items-center ${j(d)?"bg-primary-100":""}`)},[(y(),L(Z(d.component),{class:"icon transition"}))],10,Qe)]),_:2},1032,["dataSource","column","pagination"])]),_:2},1024))),128))]),_:1},8,["activeKey","class"])]),_:1},8,["spinning"])]),tagRender:l(u=>{var d;return[z("div",He,[(y(),L(Z((d=C.value.get(u.value))==null?void 0:d.component))),i[6]||(i[6]=a()),_.value?(y(),L($,{key:0,class:"text-subtext text-[10px] ml-1 hover:text-text",onClick:E=>S(u.value)},null,8,["onClick"])):H("",!0)])]}),_:1},16,["value","open","searchValue"])}}});const Ye=se(Xe,[["__scopeId","data-v-ea40d695"]]),et={class:"authority"},tt={class:"flex justify-between"},nt={class:"flex"},on=Q({__name:"index",setup(b){const{useAuth:c}=Ke(),v={title:"线框风",key:"outlined",list:[]},U={title:"实底风",key:"filled",list:[]},V={title:"双色风",key:"twoTone",list:[]},x=[v,U,V];for(const n in ne){const e={label:n,value:n,component:ne[n]};n.endsWith("Outlined")?v.list.push(e):n.endsWith("Filled")?U.list.push(e):n.endsWith("TwoTone")&&V.list.push(e)}const _=[{title:"菜单名称",dataIndex:"title"},{title:"name",dataIndex:"name"},{title:"图标",dataIndex:"icon"},{title:"path",dataIndex:"path"},{title:"页面组件",dataIndex:"component"},{title:"权限",dataIndex:"permission"},{title:"渲染菜单",dataIndex:"renderMenu",customRender:n=>n.record.renderMenu?"是":"否"},{width:140,title:"操作",align:"center",dataIndex:"operation"}],g=B(()=>{const n=e=>e.map(m=>({title:m.title,value:m.id,children:m.children&&n(m.children)}));return n(i.value)}),C=k(!1),t=Re({id:void 0,pid:void 0,menu_type:"page",name:"",title:void 0,icon:void 0,badge:void 0,target:"_self",path:"",component:"",renderMenu:!0,permission:void 0,cacheable:!0}),w=k();te(()=>t.pid,n=>{var m;if(!n)return;const e=(p,$)=>{for(const I of $){if(I.name===p)return I;if(I.children){const u=e(p,I.children);if(u)return u}}};{const p=e(n,i.value);t.path=p.path+"/"+(t.name||""),(m=w.value)==null||m.focus()}});const S=k(),A=k(!1);function P(){var n;A.value=!0,(n=S.value)==null||n.validate().then(()=>{t.id?F.menuController.update({id:t.id},t):F.menuController.store(t),C.value=!1}).finally(()=>{A.value=!1})}const O=k("新增菜单"),f=k("component"),M={component:{props:"component",placeholder:"请输入需要渲染的页面组件"},iframe:{props:"link",placeholder:"请输入链接地址"},link:{props:"link",placeholder:"请输入链接地址"}};te(f,n=>{n==="component"?(t.component=void 0,t.target="_self",t.link=void 0,S.value.clearValidate(["link"])):n==="link"?(t.component="link",t.target="_blank",S.value.clearValidate(["component"])):n==="iframe"&&(t.component="iframe",t.target="_self",S.value.clearValidate(["component"]))});const T=c("system:auth:menu",function(n){var e;(e=S.value)==null||e.resetFields(),t.id=n.id,t.name=n.name,t.title=n.title,t.path=n.path,t.component=n.component,t.icon=n.icon,t.badge=n.badge,t.link=n.link,t.target=n.target,t.renderMenu=n.renderMenu,t.permission=n.permission,t.pid=n.pid,f.value=t.component==="LinkView"?"link":t.component==="iframe"?"iframe":"component",C.value=!0,O.value="编辑菜单"});function j(){var n;(n=S.value)==null||n.resetFields(),t.id=void 0,t.name="",t.title=void 0,t.path="",t.component="",t.icon=void 0,t.renderMenu=!1,t.permission=void 0,C.value=!0,O.value="新增菜单"}const D=c("delete",function(n){F.menuController.destroy({id:n.id})});he();const s=n=>{console.log(n,"--handleMenuType")};let i=k([]);return Pe(async()=>{i.value=await F.menuController.list()}),(n,e)=>{const m=ie("PlusOutlined"),p=Ce,$=we,I=Se,u=Ie,d=Me,E=Le,G=Ue,X=$e,K=Be,ue=oe,re=Ve,pe=Ae,Y=Oe,de=Te,me=Ne,ve=ze,fe=je("auth");return y(),N("div",et,[o(I,{rowKey:"id",columns:_,dataSource:q(i),pagination:{pageSize:20,current:1,total:10}},{title:l(()=>[z("div",tt,[e[14]||(e[14]=a(`
          菜单列表
          `)),z("div",nt,[o(p,{type:"primary",onClick:j},{icon:l(()=>[o(m)]),default:l(()=>[e[13]||(e[13]=a(`
              新增
            `))]),_:1})])])]),bodyCell:l(({text:r,record:h,index:ot,column:ee})=>[ee.dataIndex==="operation"?(y(),N(R,{key:0},[o(p,{class:"text-xs",type:"primary",size:"small",onClick:_e=>q(T)(h)},{default:l(()=>e[15]||(e[15]=[a("编辑")])),_:2},1032,["onClick"]),e[17]||(e[17]=a()),o($,{title:"确认删除？",onConfirm:_e=>q(D)(h)},{default:l(()=>[Ee((y(),L(p,{class:"text-xs ml-base",danger:"",size:"small"},{default:l(()=>e[16]||(e[16]=[a("删除")])),_:1})),[[fe,void 0,"delete"]])]),_:2},1032,["onConfirm"])],64)):ee.dataIndex==="icon"?(y(),L(Z(h.icon),{key:1})):H("",!0)]),_:1},8,["dataSource"]),e[43]||(e[43]=a()),o(ve,{okButtonProps:{loading:A.value},width:"540px",visible:C.value,"onUpdate:visible":e[12]||(e[12]=r=>C.value=r),title:O.value,onOk:P},{default:l(()=>[o(me,{ref_key:"form",ref:S,model:t,labelCol:{span:5},wrapperCol:{span:16,offset:1}},{default:l(()=>[o(d,{required:"",name:"name",label:"name"},{default:l(()=>[o(u,{value:t.name,"onUpdate:value":e[0]||(e[0]=r=>t.name=r)},null,8,["value"])]),_:1}),e[33]||(e[33]=a()),o(d,{required:"",name:"path",label:"path"},{default:l(()=>[o(u,{ref_key:"pathInput",ref:w,value:t.path,"onUpdate:value":e[1]||(e[1]=r=>t.path=r)},null,8,["value"])]),_:1}),e[34]||(e[34]=a()),o(d,{required:"",name:"title",label:"菜单标题"},{default:l(()=>[o(u,{value:t.title,"onUpdate:value":e[2]||(e[2]=r=>t.title=r)},null,8,["value"])]),_:1}),e[35]||(e[35]=a()),o(d,{name:"pid",label:"父级菜单"},{default:l(()=>[o(E,{"tree-default-expand-all":"",placeholder:"设置父级菜单",value:t.pid,"onUpdate:value":e[3]||(e[3]=r=>t.pid=r),treeData:g.value},null,8,["value","treeData"])]),_:1}),e[36]||(e[36]=a()),o(d,{name:"icon",label:"菜单图标"},{default:l(()=>[o(Ye,{column:6,options:x,mode:"single",value:t.icon,"onUpdate:value":e[4]||(e[4]=r=>t.icon=r)},null,8,["value"])]),_:1}),e[37]||(e[37]=a()),o(d,{name:"menu_type",label:"菜单类型"},{default:l(()=>[o(X,{value:t.menu_type,"onUpdate:value":e[5]||(e[5]=r=>t.menu_type=r),onChange:s},{default:l(()=>[o(G,{value:"menu"},{default:l(()=>e[19]||(e[19]=[a("菜单")])),_:1}),e[22]||(e[22]=a()),o(G,{value:"page"},{default:l(()=>e[20]||(e[20]=[a("页面")])),_:1}),e[23]||(e[23]=a()),o(G,{value:"button"},{default:l(()=>e[21]||(e[21]=[a("按钮")])),_:1})]),_:1},8,["value"])]),_:1}),e[38]||(e[38]=a()),o(d,{required:"",name:M[f.value].props,wrapperCol:{span:21,offset:1}},{default:l(()=>[o(pe,{compact:""},{default:l(()=>[o(re,null,{default:l(()=>[o(ue,{value:f.value,"onUpdate:value":e[6]||(e[6]=r=>f.value=r),style:{width:"106px"}},{default:l(()=>[o(K,{value:"component"},{default:l(()=>e[24]||(e[24]=[a("页面组件")])),_:1}),e[27]||(e[27]=a()),o(K,{value:"iframe"},{default:l(()=>e[25]||(e[25]=[a("iframe")])),_:1}),e[28]||(e[28]=a()),o(K,{value:"link"},{default:l(()=>e[26]||(e[26]=[a("外链")])),_:1})]),_:1},8,["value"])]),_:1}),e[29]||(e[29]=a()),o(u,{value:t[M[f.value].props],"onUpdate:value":e[7]||(e[7]=r=>t[M[f.value].props]=r),placeholder:M[f.value].placeholder?M[f.value].placeholder:"@/components/layout/BlankView.vue",style:{width:"calc(100% - 120px)"}},null,8,["value","placeholder"])]),_:1})]),_:1},8,["name"]),e[39]||(e[39]=a()),o(d,{name:"badge",label:"菜单徽标"},{default:l(()=>[o(u,{value:t.badge,"onUpdate:value":e[8]||(e[8]=r=>t.badge=r)},null,8,["value"])]),_:1}),e[40]||(e[40]=a()),o(d,{name:"permission",label:"权限校验"},{default:l(()=>[o(u,{value:t.permission,"onUpdate:value":e[9]||(e[9]=r=>t.permission=r)},null,8,["value"])]),_:1}),e[41]||(e[41]=a()),o(d,{required:"",name:"target",label:"打开窗口"},{default:l(()=>[o(X,{disabled:f.value==="link"||f.value==="iframe",value:t.target,"onUpdate:value":e[10]||(e[10]=r=>t.target=r)},{default:l(()=>[o(Y,{value:"_self"},{default:l(()=>e[30]||(e[30]=[a("当前窗口")])),_:1}),e[32]||(e[32]=a()),o(Y,{value:"_blank"},{default:l(()=>e[31]||(e[31]=[a("新窗口")])),_:1})]),_:1},8,["disabled","value"])]),_:1}),e[42]||(e[42]=a()),o(d,{required:"",name:"renderMenu",label:"渲染菜单"},{default:l(()=>[o(de,{checked:t.renderMenu,"onUpdate:checked":e[11]||(e[11]=r=>t.renderMenu=r),"checked-children":"是","un-checked-children":"否"},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["okButtonProps","visible","title"])])}}});export{on as default};
//# sourceMappingURL=index.c218f0d5.1755837058343.js.map
