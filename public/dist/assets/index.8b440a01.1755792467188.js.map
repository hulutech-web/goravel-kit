{"version":3,"file":"index.8b440a01.1755792467188.js","sources":["../../src/pages/system/auth/permission/index.vue"],"sourcesContent":["<template>\n  <div>\n    <vxe-toolbar ref=\"toolbarRef\" :buttons=\"toolbarButtons\" @button-click=\"buttonClickEvent\"></vxe-toolbar>\n    <vxe-table\n        border\n        ref=\"tableRef\"\n        :edit-config=\"{mode: 'row', trigger: 'click'}\"\n        :column-config=\"columnConfig\"\n        :tree-config=\"treeConfig\"\n        :data=\"persForms.permissions\">\n      <vxe-column field=\"name\" title=\"名称\" :edit-render=\"{ name: 'AInput' }\">\n      </vxe-column>\n      <vxe-column field=\"code\" title=\"编码(与菜单【权限校验】一致)\" :edit-render=\"{ name: 'AInput' }\"></vxe-column>\n      <vxe-column field=\"type\" title=\"类型\" :edit-render=\"{ name: 'AInput' }\"></vxe-column>\n      <vxe-column field=\"menu_id\" title=\"菜单\" :edit-render=\"{ name: 'AInput' }\"></vxe-column>\n    </vxe-table>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Api from \"@/api\";\nimport {VxeToolbarEvents, VxeToolbarPropTypes} from \"vxe-pc-ui/types/components/toolbar\";\n\nconst treeConfig = reactive({\n  transform: true,\n  rowField: 'id',\n  parentField: 'parentId'\n})\n\nconst persForms = ref({\n  permissions: []\n})\nconst tableRef = ref(null)\nconst perForm = ref({\n  id: null,\n  name: \"\",\n  code: \"\",\n  type: 1,\n  menu_id: null,\n})\n\nconst toolbarButtons = ref<VxeToolbarPropTypes.Buttons>([\n  // {name: '新增', code: 'add', status: 'primary'},\n  // {name: '删除', code: 'del', status: 'error'},\n  {name: '保存', code: 'save', status: 'success'}\n])\nconst buttonClickEvent: VxeToolbarEvents.ButtonClick = async (params) => {\n  console.log(params.$event.target)\n  switch (params.code) {\n    case \"add\":\n      persForms.value.permissions.push(perForm.value)\n      break;\n    case \"del\":\n      persForms.value.permissions = persForms.value.permissions.filter(i => i.id !== perForm.value.id)\n      break;\n    case \"save\":\n      //获取编辑过的数据\n      await Api.permissionController.update({id: id.value}, chapterForms.value)\n      tableRef.value.commitProxy('query')\n      break;\n  }\n}\nconst columnConfig = reactive({\n  resizable: true\n})\nconst initPers = async () => {\n  // @ts-ignore\n  persForms.value.permissions = await Api.permissionController.list()\n  console.log( persForms.value.permissions)\n}\ninitPers()\n</script>\n\n<style scoped>\n\n</style>"],"names":["treeConfig","reactive","persForms","ref","tableRef","perForm","toolbarButtons","buttonClickEvent","params","i","Api","columnConfig"],"mappings":"mlFAuBA,MAAAA,EAAAC,EAAA,CAA4B,UAAA,GACf,SAAA,KACD,YAAA,UACG,CAAA,EAGfC,EAAAC,EAAA,CAAsB,YAAA,CAAA,CACN,CAAA,EAEhBC,EAAAD,EAAA,IAAA,EACAE,EAAAF,EAAA,CAAoB,GAAA,KACd,KAAA,GACE,KAAA,GACA,KAAA,EACA,QAAA,IACG,CAAA,EAGXG,EAAAH,EAAA,CAAwD,CAAA,KAAA,KAAA,KAAA,OAAA,OAAA,SAAA,CAGV,CAAA,EAE9CI,EAAA,MAAAC,GAAA,CAEE,OADA,QAAA,IAAAA,EAAA,OAAA,MAAA,EACAA,EAAA,KAAA,CAAqB,IAAA,MAEjBN,EAAA,MAAA,YAAA,KAAAG,EAAA,KAAA,EACA,MAAA,IAAA,MAEAH,EAAA,MAAA,YAAAA,EAAA,MAAA,YAAA,OAAAO,GAAAA,EAAA,KAAAJ,EAAA,MAAA,EAAA,EACA,MAAA,IAAA,OAGA,MAAAK,EAAA,qBAAA,OAAA,CAAA,GAAA,GAAA,KAAA,EAAA,aAAA,KAAA,EACAN,EAAA,MAAA,YAAA,OAAA,EACA,KAAA,CACJ,EAEFO,EAAAV,EAAA,CAA8B,UAAA,EACjB,CAAA,EAOb,OALA,SAAA,CAEEC,EAAA,MAAA,YAAA,MAAAQ,EAAA,qBAAA,OACA,QAAA,IAAAR,EAAA,MAAA,WAAA,CAAwC"}