import{e as A}from"./ant-design-vue.6003db98.1755837291293.js";import"./index-e86a3d8d.js";import{k as L,r as d,w as N,a1 as p,Z as b,_ as x,c as l,a3 as n,I as i,F as U,a7 as E,a2 as T,$ as H,u as z,J as I}from"./@vue.f517c4d3.1755837291293.js";import{u as J}from"./useTable.edd458fb.1755837291293.js";import"./@babel.ff5fac95.1755837291293.js";import"./resize-observer-polyfill.0f9f8adb.1755837291293.js";import"./vue-types.ef06c517.1755837291293.js";import"./@ant-design.9d2fe45e.1755837291293.js";import"./@ctrl.110cde02.1755837291293.js";import"./dom-align.ecb06dd6.1755837291293.js";import"./lodash-es.3d27f5e2.1755837291293.js";import"./dayjs.ff9046db.1755837291293.js";import"./async-validator.dee29e8b.1755837291293.js";import"./scroll-into-view-if-needed.e8fe8fab.1755837291293.js";import"./compute-scroll-into-view.183f845a.1755837291293.js";import"./vue-router.9464b678.1755837291293.js";import"./pinia.8982db38.1755837291293.js";import"./vue-demi.71ba0ef2.1755837291293.js";import"./axios.dcb3bfcc.1755837291293.js";import"./qs.a529ec33.1755837291293.js";import"./side-channel.9e54de98.1755837291293.js";import"./es-errors.c75f5a96.1755837291293.js";import"./object-inspect.7e6175f7.1755837291293.js";import"./side-channel-list.169b004a.1755837291293.js";import"./side-channel-map.33f5b958.1755837291293.js";import"./get-intrinsic.a2929bf2.1755837291293.js";import"./es-object-atoms.11ea1ab9.1755837291293.js";import"./math-intrinsics.9389030e.1755837291293.js";import"./gopd.30775706.1755837291293.js";import"./es-define-property.27915812.1755837291293.js";import"./has-symbols.76fb15e9.1755837291293.js";import"./get-proto.0694628e.1755837291293.js";import"./dunder-proto.eacfd4c7.1755837291293.js";import"./call-bind-apply-helpers.7f6153fb.1755837291293.js";import"./function-bind.48f717dc.1755837291293.js";import"./hasown.62c0daf0.1755837291293.js";import"./call-bound.9966c24b.1755837291293.js";import"./side-channel-weakmap.d483489f.1755837291293.js";import"./stepin.98140aa1.1755837291293.js";import"./enquire.js.29d23a08.1755837291293.js";import"./lodash.907b933a.1755837291293.js";import"./js-cookie.df2f1d76.1755837291293.js";import"./@vueuse.9b0e1a90.1755837291293.js";import"./clipboard.1ee81d47.1755837291293.js";import"./highlight.js.f034732b.1755837291293.js";import"./nprogress.cfb775e5.1755837291293.js";import"./vxe-table.748bd7a0.1755837291293.js";import"./xe-utils.dd761dc0.1755837291293.js";import"./@vxe-ui.edbd1fdc.1755837291293.js";import"./dom-zindex.d72a3c32.1755837291293.js";import"./vue.39adf4ea.1755837291293.js";import"./vxe-pc-ui.0dbee1b4.1755837291293.js";import"./vue-pick-colors.8c35f1dd.1755837291293.js";import"./@popperjs.f3391c26.1755837291293.js";const Z={class:"mt-3"},j=L({__name:"HuluRule",props:{modelValue:{type:Array,default:()=>[]},ruleCallback:{type:Function,default:()=>{}}},emits:["update:modelValue"],setup(V,{emit:c}){const v=V,y=c,o=d(),f=d(v.modelValue);N(()=>v.modelValue,t=>{if(t==null||t.length==0){f.value=[];return}else{f.value=t;const e=o.value;e&&(e.setEditCell(u=>u.rule_name=="required"),e.updateData())}},{deep:!0,immediate:!0});const k=d([{title:"必填",label:"必填",value:"required",disabled:!0},{title:"字符串",label:"字符串",value:"string"},{title:"邮箱",label:"邮箱",value:"email"},{title:"数字",label:"数字",value:"uint",disabled:!0},{title:"日期",label:"日期",value:"date",disabled:!0},{title:"最小长度",label:"最小长度",value:"min_len"},{title:"最大长度",label:"最大长度",value:"max_len"},{title:"最大值",label:"最大值",value:"max"},{title:"最小值",label:"最小值",value:"min"},{title:"不等于",label:"不等于",value:"ne"},{title:"文件",label:"文件",value:"slice",disabled:!0},{title:"图片",label:"图片",value:"image",disabled:!0},{title:"数字大于0",label:"数字大于0",value:"number",disabled:!0}]),s=d([{title:"无符号整型",label:"uint",value:"uint"},{title:"整型",label:"int",value:"int"},{title:"字符串",label:"string",value:"string"},{title:"64位整型",label:"int64",value:"int64"},{title:"浮点型",label:"float64",value:"float64"},{title:"carbon日期",label:"carbon.DateTime",value:"carbon.DateTime"},{title:"bool类型",label:"bool",value:"bool"}]),m=()=>{const t=o.value;t&&t.removeCheckboxRow()},g=()=>{const t=o.value;if(t){const e={rule_title:"",rule_name:"",rule_value:"",rule_type:""};t.insert(e)}},C=async()=>{const t=o.value,{fullData:e}=t.getTableData();y("update:modelValue",e)},D=d([]),q=()=>{const t=o.value;if(t){const{fullData:e}=t.getTableData();D.value=e.map(u=>({rule_title:u.rule_title,rule_name:u.rule_name,column_name:u.column_name,rule_type:u.rule_type,rule_value:u.rule_value?u.rule_value:""})),v.ruleCallback(D.value)}};return(t,e)=>{const u=p("vxe-button"),w=p("vxe-toolbar"),_=p("vxe-column"),$=p("vxe-option"),R=p("vxe-select"),B=p("vxe-input"),F=p("vxe-table"),S=A;return b(),x("div",null,[l(w,null,{buttons:n(()=>[l(u,{status:"primary",onClick:e[0]||(e[0]=r=>g())},{default:n(()=>e[2]||(e[2]=[i("新增")])),_:1}),e[4]||(e[4]=i()),l(u,{status:"danger",onClick:e[1]||(e[1]=r=>m())},{default:n(()=>e[3]||(e[3]=[i("删除")])),_:1})]),_:1}),e[10]||(e[10]=i()),l(F,{border:"","show-overflow":"",ref_key:"tableRef",ref:o,"max-height":"400","column-config":{resizable:!0},data:f.value,"edit-config":{trigger:"click",mode:"row"},onEditActivated:C},{default:n(()=>[l(_,{type:"checkbox",width:"60"}),e[5]||(e[5]=i()),l(_,{field:"column_name",title:"列名","edit-render":{name:"input"}}),e[6]||(e[6]=i()),l(_,{field:"rule_type",title:"request字段类型","edit-render":{}},{edit:n(({row:r})=>[l(R,{modelValue:r.rule_type,"onUpdate:modelValue":a=>r.rule_type=a,clearable:"",transfer:""},{default:n(()=>[(b(!0),x(U,null,E(s.value,a=>(b(),T($,{key:a.label,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e[7]||(e[7]=i()),l(_,{field:"rule_name",title:"rule规则类型","edit-render":{}},{edit:n(({row:r})=>[l(R,{modelValue:r.rule_name,"onUpdate:modelValue":a=>r.rule_name=a,clearable:"",transfer:""},{default:n(()=>[(b(!0),x(U,null,E(k.value,a=>(b(),T($,{key:a.label,value:a.value,label:a.label},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e[8]||(e[8]=i()),l(_,{field:"rule_value",title:"规则值","edit-render":{}},{edit:n(({row:r})=>[l(B,{modelValue:r.rule_value,"onUpdate:modelValue":a=>r.rule_value=a,type:"text"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"]),e[11]||(e[11]=i()),H("div",Z,[l(S,{type:"primary",onClick:q},{default:n(()=>e[9]||(e[9]=[i("提交")])),_:1})])])}}}),G={__name:"validateform",props:{tablename:{type:String,required:!0}},setup(V){const c=V,{getColumn:v,makeRequest:y}=J(),o=d([]);(async()=>{let s=await v(c.tablename);o.value=s.filter(m=>m.column_name!=="id"&&m.column_name!=="created_at"&&m.column_name!=="updated_at"&&m.column_name!=="deleted_at")})();const k=async s=>{await y({tablename:c.tablename,rule_fields:s})};return(s,m)=>{const g=j;return b(),x("div",null,[l(g,{modelValue:z(o),"onUpdate:modelValue":m[0]||(m[0]=C=>I(o)?o.value=C:null),ruleCallback:k},null,8,["modelValue"])])}}},Ke=G;export{Ke as default};
//# sourceMappingURL=validateform.b59b962b.1755837291293.js.map
