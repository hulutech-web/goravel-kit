{"version":3,"file":"swiper.66114a4e.1753605037589.js","sources":["../../src/pages/cms/swiper.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport {A11y, Navigation, Pagination, Scrollbar} from 'swiper/modules';\r\nimport {Swiper, SwiperSlide} from 'swiper/vue';\r\n// Import Swiper styles\r\nimport 'swiper/css';\r\nimport 'swiper/css/navigation';\r\nimport 'swiper/css/pagination';\r\nimport 'swiper/css/scrollbar';\r\nimport Api from \"@/api\"\r\n\r\nconst baseApiUrl = import.meta.env.VITE_API_URL?import.meta.env.VITE_API_URL:'';\r\nconst modules = [Navigation, Pagination, Scrollbar, A11y];\r\nconst swipers = ref([] as any)\r\nconst loadData = async () => {\r\n  swipers.value = await Api.swiperController.list();\r\n  if (swipers.value.length > 0) {\r\n    swiperInfo.value = swipers.value[0]\r\n  }\r\n}\r\n\r\nloadData()\r\n\r\nconst swiperForm = ref({\r\n  id: null,\r\n  title: '',\r\n  img_url: '',\r\n  link: '',\r\n  badge: \"\",\r\n  description: \"\"\r\n})\r\nconst formRef = ref()\r\nconst onSubmit = () => {\r\n  /*表单验证*/\r\n  formRef.value.validate().then(async () => {\r\n    console.log(swiperForm.value)\r\n    await Api.swiperController.store(swiperForm.value)\r\n    await loadData();\r\n  })\r\n}\r\nconst swiperInfo = ref({\r\n  id: null,\r\n  title: '',\r\n  img_url: '',\r\n  link: '',\r\n  badge: \"\",\r\n  description: \"\"\r\n})\r\nconst activeIndexChange = (swiper) => {\r\n  console.log(\"activeIndexChange\")\r\n  console.log(swiper.activeIndex);\r\n  swiperInfo.value = swipers.value[swiper.activeIndex]\r\n};\r\n\r\nconst confirmDel = async () => {\r\n  await Api.swiperController.destroy({id: swiperInfo.value.id})\r\n  await loadData()\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <a-row>\r\n      <a-col :span=\"18\">\r\n        <div class=\"flex justify-center\">\r\n          <div class=\"w-[900px]\">\r\n            <swiper\r\n                :modules=\"modules\"\r\n                :slides-per-view=\"1\"\r\n                :space-between=\"8\"\r\n                @activeIndexChange=\"activeIndexChange\"\r\n                :navigation=\"true\"\r\n                :pagination=\"{ clickable: true }\"\r\n                :scrollbar=\"{ draggable: true }\"\r\n            >\r\n              <swiper-slide v-for=\"(s,ind) in  swipers\" :key=\"ind\" style=\"height:400px;\">\r\n                <img style=\"width:900px;height:400px;\" :src=\"`${baseApiUrl}${s.img_url}`\"/>\r\n              </swiper-slide>\r\n            </swiper>\r\n          </div>\r\n        </div>\r\n        <a-card>\r\n          <a-descriptions :size=\"'small'\" layout=\"vertical\" :column=\"2\">\r\n            <a-descriptions-item label=\"标题\">{{ swiperInfo.title }}</a-descriptions-item>\r\n            <a-descriptions-item label=\"描述\">{{ swiperInfo.description }}</a-descriptions-item>\r\n            <a-descriptions-item label=\"图片路径\" :span=\"2\">{{ swiperInfo.img_url }}</a-descriptions-item>\r\n            <a-descriptions-item label=\"跳转链接\" :span=\"2\">{{ swiperInfo.link }}</a-descriptions-item>\r\n            <a-descriptions-item label=\"徽章\" :span=\"2\">{{ swiperInfo.badge }}</a-descriptions-item>\r\n          </a-descriptions>\r\n          <a-popconfirm\r\n              title=\"确定删除?\"\r\n              ok-text=\"是的\"\r\n              cancel-text=\"再想想\"\r\n              @confirm=\"confirmDel\"\r\n          >\r\n            <a-button type=\"primary\" danger>删除</a-button>\r\n          </a-popconfirm>\r\n        </a-card>\r\n\r\n      </a-col>\r\n      <a-col :span=\"6\">\r\n        <a-card>\r\n          <a-form :model=\"swiperForm\" ref=\"formRef\">\r\n            <a-form-item label=\"标题\" name=\"title\" :rules=\"[{required:true,message:'请输入标题'}]\">\r\n              <a-input v-model:value=\"swiperForm.title\" placeholder=\"请输入标题\"/>\r\n\r\n            </a-form-item>\r\n            <a-form-item label=\"图片\" name=\"img_url\" :rules=\"[{required:true,message:'请选择图片'}]\">\r\n              <a-form-item-rest>\r\n                <FileSelect v-model=\"swiperForm.img_url\"/>\r\n              </a-form-item-rest>\r\n\r\n            </a-form-item>\r\n            <a-form-item label=\"小程序跳转链接\" name=\"link\">\r\n              <a-input v-model:value=\"swiperForm.link\" placeholder=\"请输入小程序跳转链接\"/>\r\n            </a-form-item>\r\n            <a-form-item label=\"徽章\" name=\"badge\">\r\n              <a-form-item-rest>\r\n                <FileSelect v-model=\"swiperForm.badge\"/>\r\n              </a-form-item-rest>\r\n\r\n            </a-form-item>\r\n            <a-form-item label=\"描述\" name=\"description\">\r\n              <a-textarea v-model:value=\"swiperForm.description\" placeholder=\"请输入描述\"/>\r\n            </a-form-item>\r\n            <a-form-item>\r\n              <a-button type=\"primary\" @click=\"onSubmit\">提交</a-button>\r\n            </a-form-item>\r\n          </a-form>\r\n        </a-card>\r\n      </a-col>\r\n    </a-row>\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<style>\r\n\r\n</style>"],"names":["baseApiUrl","modules","Navigation","Pagination","Scrollbar","A11y","swipers","ref","loadData","Api","swiperInfo","swiperForm","formRef","onSubmit","activeIndexChange","swiper","confirmDel"],"mappings":"w8FAUA,MAAAA,EAAA,sBACAC,EAAA,CAAAC,EAAAC,EAAAC,EAAAC,CAAA,EACAC,EAAAC,EAAA,CAAA,CAAA,EACAC,EAAA,SAAA,CACEF,EAAA,MAAA,MAAAG,EAAA,iBAAA,KAAA,EACAH,EAAA,MAAA,OAAA,IACEI,EAAA,MAAAJ,EAAA,MAAA,CAAA,EACF,EAGFE,IAEA,MAAAG,EAAAJ,EAAA,CAAuB,GAAA,KACjB,MAAA,GACG,QAAA,GACE,KAAA,GACH,MAAA,GACC,YAAA,EACM,CAAA,EAEfK,EAAAL,IACAM,EAAA,IAAA,CAEED,EAAA,MAAA,SAAA,EAAA,KAAA,SAAA,CACE,QAAA,IAAAD,EAAA,KAAA,EACA,MAAAF,EAAA,iBAAA,MAAAE,EAAA,KAAA,EACA,MAAAH,EAAA,CAAe,CAAA,CAChB,EAEHE,EAAAH,EAAA,CAAuB,GAAA,KACjB,MAAA,GACG,QAAA,GACE,KAAA,GACH,MAAA,GACC,YAAA,EACM,CAAA,EAEfO,EAAAC,GAAA,CACE,QAAA,IAAA,mBAAA,EACA,QAAA,IAAAA,EAAA,WAAA,EACAL,EAAA,MAAAJ,EAAA,MAAAS,EAAA,WAAA,CAAmD,EAGrDC,EAAA,SAAA,CACE,MAAAP,EAAA,iBAAA,QAAA,CAAA,GAAAC,EAAA,MAAA,EAAA,CAAA,EACA,MAAAF,EAAA,CAAe"}