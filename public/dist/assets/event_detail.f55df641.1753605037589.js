import{i as H,H as J,J as K,B as L,g as T,G as Z,t as Q,O as W,K as X}from"./ant-design-vue.00fd9e7c.1753605037589.js";import{_ as Y}from"./FileSelect.vue_vue_type_script_setup_true_lang.c8ce7069.1753605037589.js";import{A as q}from"./index-a4f0172e.js";import"./mapinit.4d2e495a.1753605037589.js";import{a as c}from"./vue-router.9360959a.1753605037589.js";import{d as h,r as w,a as tt,a1 as x,Z as a,_ as $,$ as g,u as o,I as e,c as l,a3 as i,a2 as d,a5 as r,j as m,F as et,a7 as ot}from"./@vue.3ad65df9.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";import"./resize-observer-polyfill.0f9f8adb.1753605037589.js";import"./vue-types.ef06c517.1753605037589.js";import"./@ant-design.002a57d7.1753605037589.js";import"./@ctrl.110cde02.1753605037589.js";import"./dom-align.ecb06dd6.1753605037589.js";import"./lodash-es.3d27f5e2.1753605037589.js";import"./dayjs.d60d73bd.1753605037589.js";import"./async-validator.dee29e8b.1753605037589.js";import"./scroll-into-view-if-needed.583c97c5.1753605037589.js";import"./compute-scroll-into-view.183f845a.1753605037589.js";import"./pinia.11f4bfaa.1753605037589.js";import"./vue-demi.71ba0ef2.1753605037589.js";import"./axios.dcb3bfcc.1753605037589.js";import"./qs.247a6393.1753605037589.js";import"./side-channel.9d8f1847.1753605037589.js";import"./es-errors.c75f5a96.1753605037589.js";import"./object-inspect.0fbacf7d.1753605037589.js";import"./side-channel-list.c76608c5.1753605037589.js";import"./side-channel-map.76c430fe.1753605037589.js";import"./get-intrinsic.7d53f00e.1753605037589.js";import"./es-object-atoms.11ea1ab9.1753605037589.js";import"./math-intrinsics.9389030e.1753605037589.js";import"./gopd.30775706.1753605037589.js";import"./es-define-property.27915812.1753605037589.js";import"./has-symbols.76fb15e9.1753605037589.js";import"./get-proto.757e385d.1753605037589.js";import"./dunder-proto.05150bcd.1753605037589.js";import"./call-bind-apply-helpers.0833f3e9.1753605037589.js";import"./function-bind.61637ca6.1753605037589.js";import"./hasown.67f3f833.1753605037589.js";import"./call-bound.09054f06.1753605037589.js";import"./side-channel-weakmap.4b9abb6a.1753605037589.js";import"./stepin.df3b4e80.1753605037589.js";import"./enquire.js.29d23a08.1753605037589.js";import"./lodash.5999789d.1753605037589.js";import"./js-cookie.df2f1d76.1753605037589.js";import"./@vueuse.60746e97.1753605037589.js";import"./clipboard.f49c93fb.1753605037589.js";import"./highlight.js.1f23b1ae.1753605037589.js";import"./nprogress.dafb99c9.1753605037589.js";import"./vxe-table.a5304289.1753605037589.js";import"./xe-utils.0b26132f.1753605037589.js";import"./@vxe-ui.1c5cc959.1753605037589.js";import"./dom-zindex.d72a3c32.1753605037589.js";import"./vue.5e2bff9c.1753605037589.js";import"./vxe-pc-ui.ed308165.1753605037589.js";import"./vue-pick-colors.10d84206.1753605037589.js";import"./@popperjs.f3391c26.1753605037589.js";import"./coordtransform.c5296600.1753605037589.js";const lt={class:"flex justify-center"},nt=["src"],it=["href"],ue=h({__name:"event_detail",setup(rt){const O=c(),F=w(O.params.id),k="https://hongyu.cyou",N=()=>{n.value.addition_file==null&&(n.value.addition_file=[]),n.value.addition_file.push(""),u.value.push("")},n=w({id:null,code:"",title:"",description:"",event_type:"",sport_type:"",format:"",max_participants:"",min_participants:"",start_time:"",end_time:"",registration_deadline:"",cover_image:"",status:"",creator_id:"",creator_role:"",professional_event:{venue_id:0,coach_id:0,ticket_id:0,ticket_price:0,referee_id:0,equipment_provided:"",rules_description:"",addition_file:[]},outdoor_event:{location:"",gps:{type:"Point",coordinates:[107.466127,31.224677]},meeting_point:"",contact_person:"",contact_phone:"",bring_equipment:"",weather_plan:""},event_registrations:[]}),u=w([]),j=async()=>{F.value&&(n.value=await q.eventController.show({id:F.value}),u.value=n.value.professional_event.addition_file?n.value.professional_event.addition_file:[],console.log(u.value))},A=V=>{u.value.splice(V,1),console.log(u.value)},E=async()=>{console.log(u.value),await q.eventController.updateAdditionFile({id:n.value.id},{addition_file:u.value})},f=tt(()=>{switch(n.value.status){case"draft":return"草稿";case"published":return"已发布";case"registration":return"报名中";case"in_progress":return"进行中";case"completed":return"完成";case"cancelled":return"取消";default:return"未知"}});return j(),(V,t)=>{const b=H,s=J,C=K,_=L,P=x("PlusOutlined"),B=T,S=Z,U=Y,D=Q,I=x("MinusCircleOutlined"),v=x("vxe-column"),M=W,R=x("vxe-table"),G=X;return a(),$("div",null,[g("div",lt,[g("img",{src:`${o(k)}${o(n).cover_image}`,alt:"",style:{width:"200px",height:"auto"}},null,8,nt)]),t[48]||(t[48]=e()),g("div",null,[l(G,{size:"small"},{default:i(()=>[l(b,null,{default:i(()=>t[0]||(t[0]=[e("参赛详情")])),_:1}),t[39]||(t[39]=e()),o(n).event_type==="outdoor"?(a(),d(C,{key:0,title:"",size:"small",bordered:"",layout:"vertical",column:3},{default:i(()=>[l(s,{label:"地址",span:1},{default:i(()=>[e(r(o(n).outdoor_event.location),1)]),_:1}),t[2]||(t[2]=e()),l(s,{label:"集合地点",span:1},{default:i(()=>[e(r(o(n).outdoor_event.meeting_point),1)]),_:1}),t[3]||(t[3]=e()),l(s,{label:"联系人",span:1},{default:i(()=>[e(r(o(n).outdoor_event.contact_person),1)]),_:1}),t[4]||(t[4]=e()),l(s,{label:"联系电话",span:1},{default:i(()=>[e(r(o(n).outdoor_event.contact_phone),1)]),_:1}),t[5]||(t[5]=e()),l(s,{label:"需自带装备",span:1},{default:i(()=>[e(r(o(n).outdoor_event.bring_equipment),1)]),_:1}),t[6]||(t[6]=e()),l(s,{label:"雨天备选方案",span:1},{default:i(()=>[e(r(o(n).outdoor_event.weather_plan),1)]),_:1}),t[7]||(t[7]=e()),l(s,{label:"坐标",span:3},{default:i(()=>t[1]||(t[1]=[g("div",{id:"container",style:{height:"200px"}},null,-1)])),_:1})]),_:1})):m("",!0),t[40]||(t[40]=e()),o(n).event_type==="professional"?(a(),d(C,{key:1,title:"",bordered:"",layout:"vertical",size:"small",column:4},{default:i(()=>[l(s,{label:"场馆",span:1},{default:i(()=>[e(r(o(n).professional_event.venue?o(n).professional_event.venue.name:""),1)]),_:1}),t[8]||(t[8]=e()),l(s,{label:"门票",span:1},{default:i(()=>[e(r(o(n).professional_event.ticket?o(n).professional_event.ticket.name:""),1)]),_:1}),t[9]||(t[9]=e()),l(s,{label:"裁判",span:1},{default:i(()=>[e(r(o(n).professional_event.referee?o(n).professional_event.referee.username:""),1)]),_:1}),t[10]||(t[10]=e()),l(s,{label:"装备",span:1},{default:i(()=>[e(r(o(n).professional_event.equipment_provided),1)]),_:1}),t[11]||(t[11]=e()),l(s,{label:"比赛规则",span:4},{default:i(()=>[e(r(o(n).professional_event.rules_description),1)]),_:1})]),_:1})):m("",!0),t[41]||(t[41]=e()),l(b,null,{default:i(()=>t[12]||(t[12]=[e("赛事详情")])),_:1}),t[42]||(t[42]=e()),l(C,{title:"",bordered:"",layout:"vertical",size:"small",column:4},{default:i(()=>[l(s,{label:"赛事编码",span:1},{default:i(()=>[e(r(o(n).code),1)]),_:1}),t[18]||(t[18]=e()),l(s,{label:"赛事标题"},{default:i(()=>[e(r(o(n).title),1)]),_:1}),t[19]||(t[19]=e()),l(s,{label:"类别"},{default:i(()=>[e(r(o(n).event_type==="outdoor"?"户外":"专业"),1)]),_:1}),t[20]||(t[20]=e()),l(s,{label:"运动类型"},{default:i(()=>[e(r(o(n).sport_type),1)]),_:1}),t[21]||(t[21]=e()),l(s,{label:"比赛形式"},{default:i(()=>[e(r(o(n).format),1)]),_:1}),t[22]||(t[22]=e()),l(s,{label:"最大参赛人数"},{default:i(()=>[e(r(o(n).max_participants),1)]),_:1}),t[23]||(t[23]=e()),l(s,{label:"最小开赛人数"},{default:i(()=>[e(r(o(n).min_participants),1)]),_:1}),t[24]||(t[24]=e()),l(s,{label:"开赛时间"},{default:i(()=>[e(r(o(n).start_time),1)]),_:1}),t[25]||(t[25]=e()),l(s,{label:"结束时间"},{default:i(()=>[e(r(o(n).end_time),1)]),_:1}),t[26]||(t[26]=e()),l(s,{label:"介绍"},{default:i(()=>[e(r(o(n).description),1)]),_:1}),t[27]||(t[27]=e()),l(s,{label:"报名截止时间"},{default:i(()=>[e(r(o(n).registration_deadline),1)]),_:1}),t[28]||(t[28]=e()),l(s,{label:"赛事详情"},{default:i(()=>[o(n).status==="draft"?(a(),d(_,{key:0,status:"default",text:o(f)},null,8,["text"])):m("",!0),t[13]||(t[13]=e()),o(n).status==="completed"?(a(),d(_,{key:1,status:"success",text:o(f)},null,8,["text"])):m("",!0),t[14]||(t[14]=e()),o(n).status==="cancelled"?(a(),d(_,{key:2,status:"error",text:o(f)},null,8,["text"])):m("",!0),t[15]||(t[15]=e()),o(n).status==="in_progress"?(a(),d(_,{key:3,status:"processing",text:o(f)},null,8,["text"])):m("",!0),t[16]||(t[16]=e()),o(n).status==="registration"?(a(),d(_,{key:4,status:"warning",text:o(f)},null,8,["text"])):m("",!0),t[17]||(t[17]=e()),o(n).status==="published"?(a(),d(_,{key:5,status:"green",text:o(f)},null,8,["text"])):m("",!0)]),_:1})]),_:1}),t[43]||(t[43]=e()),l(b,null,{default:i(()=>t[29]||(t[29]=[e("成绩发布")])),_:1}),t[44]||(t[44]=e()),l(S,null,{default:i(()=>[l(B,{type:"primary",onClick:N},{default:i(()=>[l(P)]),_:1}),t[31]||(t[31]=e()),l(B,{type:"primary",onClick:E},{default:i(()=>t[30]||(t[30]=[e(`
            保存
          `)])),_:1})]),_:1}),t[45]||(t[45]=e()),(a(!0),$(et,null,ot(o(u),(p,y)=>(a(),$("div",{class:"flex justify-between items-center",key:y},[l(D,{label:"附件",style:{flex:"3",margin:"12px"},rules:{required:!0,message:"不为空",trigger:"change"}},{default:i(()=>[l(U,{modelValue:o(u)[y],"onUpdate:modelValue":z=>o(u)[y]=z},null,8,["modelValue","onUpdate:modelValue"]),t[32]||(t[32]=e()),g("a",{class:"text-blue-500",target:"_blank",href:`${o(k)}${p}`},r(p),9,it)]),_:2},1024),t[33]||(t[33]=e()),l(I,{style:{"font-size":"24px",flex:"1","margin-bottom":"8px"},onClick:z=>A(y)},null,8,["onClick"])]))),128)),t[46]||(t[46]=e()),l(b,null,{default:i(()=>t[34]||(t[34]=[e("报名情况")])),_:1}),t[47]||(t[47]=e()),l(R,{size:"small",border:"inner",ref:"tableRef",data:o(n).event_registrations},{default:i(()=>[l(v,{field:"username",title:"姓名"},{default:i(({row:p})=>[e(r(p.user.username),1)]),_:1}),t[35]||(t[35]=e()),l(v,{field:"avatar",title:"头像"},{default:i(({row:p})=>[l(M,{src:`${o(k)}${p.user.avatar}`,style:{width:"36px",height:"36px"}},null,8,["src"])]),_:1}),t[36]||(t[36]=e()),l(v,{field:"phone",title:"手机号"},{default:i(({row:p})=>[e(r(p.user?p.user.phone:""),1)]),_:1}),t[37]||(t[37]=e()),l(v,{field:"transaction_id",title:"订单号"}),t[38]||(t[38]=e()),l(v,{field:"registration_time",title:"报名时间"})]),_:1},8,["data"])]),_:1})])])}}});export{ue as default};
//# sourceMappingURL=event_detail.f55df641.1753605037589.js.map
