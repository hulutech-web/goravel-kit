import{P as h,Q as ee,i as te,I as oe,g as ne,c as le,f as re,t as ae,l as se,R as ue,p as ie,s as pe,L as me,e as de,U as _e,N as fe,n as ve,V as ge,r as ye,F as be}from"./ant-design-vue.00fd9e7c.1753605037589.js";import{_ as ke}from"./FileSelect.vue_vue_type_script_setup_true_lang.c8ce7069.1753605037589.js";import{d as qe,r as y,a1 as Ue,Z as m,_ as M,$ as _,c as t,a3 as o,F as we,a7 as xe,u as n,I as a,z as $,E as S,a2 as b,j as k}from"./@vue.3ad65df9.1753605037589.js";import{A as H,a as Ce}from"./index-a4f0172e.js";import{d as Y}from"./dayjs.d60d73bd.1753605037589.js";import He from"./mapinit.4d2e495a.1753605037589.js";import{u as Ye}from"./vue-router.9360959a.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";import"./resize-observer-polyfill.0f9f8adb.1753605037589.js";import"./vue-types.ef06c517.1753605037589.js";import"./@ant-design.002a57d7.1753605037589.js";import"./@ctrl.110cde02.1753605037589.js";import"./dom-align.ecb06dd6.1753605037589.js";import"./lodash-es.3d27f5e2.1753605037589.js";import"./async-validator.dee29e8b.1753605037589.js";import"./scroll-into-view-if-needed.583c97c5.1753605037589.js";import"./compute-scroll-into-view.183f845a.1753605037589.js";import"./pinia.11f4bfaa.1753605037589.js";import"./vue-demi.71ba0ef2.1753605037589.js";import"./axios.dcb3bfcc.1753605037589.js";import"./qs.247a6393.1753605037589.js";import"./side-channel.9d8f1847.1753605037589.js";import"./es-errors.c75f5a96.1753605037589.js";import"./object-inspect.0fbacf7d.1753605037589.js";import"./side-channel-list.c76608c5.1753605037589.js";import"./side-channel-map.76c430fe.1753605037589.js";import"./get-intrinsic.7d53f00e.1753605037589.js";import"./es-object-atoms.11ea1ab9.1753605037589.js";import"./math-intrinsics.9389030e.1753605037589.js";import"./gopd.30775706.1753605037589.js";import"./es-define-property.27915812.1753605037589.js";import"./has-symbols.76fb15e9.1753605037589.js";import"./get-proto.757e385d.1753605037589.js";import"./dunder-proto.05150bcd.1753605037589.js";import"./call-bind-apply-helpers.0833f3e9.1753605037589.js";import"./function-bind.61637ca6.1753605037589.js";import"./hasown.67f3f833.1753605037589.js";import"./call-bound.09054f06.1753605037589.js";import"./side-channel-weakmap.4b9abb6a.1753605037589.js";import"./stepin.df3b4e80.1753605037589.js";import"./enquire.js.29d23a08.1753605037589.js";import"./lodash.5999789d.1753605037589.js";import"./js-cookie.df2f1d76.1753605037589.js";import"./@vueuse.60746e97.1753605037589.js";import"./clipboard.f49c93fb.1753605037589.js";import"./highlight.js.1f23b1ae.1753605037589.js";import"./nprogress.dafb99c9.1753605037589.js";import"./vxe-table.a5304289.1753605037589.js";import"./xe-utils.0b26132f.1753605037589.js";import"./@vxe-ui.1c5cc959.1753605037589.js";import"./dom-zindex.d72a3c32.1753605037589.js";import"./vue.5e2bff9c.1753605037589.js";import"./vxe-pc-ui.ed308165.1753605037589.js";import"./vue-pick-colors.10d84206.1753605037589.js";import"./@popperjs.f3391c26.1753605037589.js";import"./coordtransform.c5296600.1753605037589.js";const Ve={class:"flex justify-center"},Fe={class:"w-[60%]"},De={class:"steps-content p-3"},Me={class:"steps-action"},$e=qe({__name:"form",setup(Se){const B=Ye(),q=y(null),i=y(0),d=y({venues:[],tickets:[],coaches:[],sport_types:[]}),N=()=>{q.value.validate().then(()=>{i.value++,l.value.event_type==="outdoor"&&P()})},R=()=>{i.value--};(async()=>{d.value=await H.eventController.eventOption()})();const l=y({code:"",title:"",description:"",event_type:"",sport_type_id:null,format:"",max_participants:"",min_participants:"",start_time:"",end_time:"",registration_deadline:"",cover_image:"",status:"",creator_id:"",creator_role:"",professional_form:{venue_id:0,coach_id:0,ticket_id:0,ticket_price:0,referee_id:0,equipment_provided:"",rules_description:""},outdoor_form:{location:"",gps:{type:"Point",coordinates:[107.466127,31.224677]},meeting_point:"",contact_person:"",contact_phone:"",bring_equipment:"",weather_plan:""}}),I=()=>{l.value.professional_form={venue_id:0,coach_id:0,ticket_id:0,ticket_price:0,referee_id:0,equipment_provided:"",rules_description:""},l.value.outdoor_form={location:"",gps:{type:"Point",coordinates:[107.466127,31.224677]},meeting_point:"",contact_person:"",contact_phone:"",bring_equipment:"",weather_plan:""}},O=w=>{l.value.outdoor_form.gps.coordinates[1]=w.lat,l.value.outdoor_form.gps.coordinates[0]=w.lng},P=()=>{setTimeout(()=>{He(O,[l.value.outdoor_form.gps.coordinates[1],l.value.outdoor_form.gps.coordinates[0]])},1e3)},U=[{title:"基础信息",content:"First-content"},{title:"赛场信息",content:"Second-content"}],j=async()=>{l.value.code=await H.qrController.makeQr()},A=async()=>{await H.eventController.store(l.value),q.value.resetFields(),I(),B.go(-1)};return(w,e)=>{const z=h,E=ee,L=te,p=oe,Q=Ue("qrcode-outlined"),f=ne,T=le,Z=re,s=ae,u=se,V=ue,G=ie,v=pe,J=ke,K=me,F=de,x=_e,g=fe,C=ve,W=ge,X=ye,c=be;return m(),M("div",null,[_("div",Ve,[_("div",Fe,[t(E,{current:n(i),size:"small"},{default:o(()=>[(m(),M(we,null,xe(U,r=>t(z,{key:r.title,title:r.title},null,8,["title"])),64))]),_:1},8,["current"])])]),e[60]||(e[60]=a()),_("div",De,[t(L,null,{default:o(()=>e[23]||(e[23]=[a("表单")])),_:1}),e[59]||(e[59]=a()),t(c,{ref_key:"eventFormRef",ref:q,model:n(l),name:"validate_other"},{default:o(()=>[$(t(C,{gutter:[32,8]},{default:o(()=>[t(u,{span:12},{default:o(()=>[t(s,{name:"code",label:"赛事编码","has-feedback":"",rules:[{required:!0,message:"编码必填"}]},{default:o(()=>[t(Z,null,{default:o(()=>[t(p,{value:n(l).code,"onUpdate:value":e[0]||(e[0]=r=>n(l).code=r),style:{width:"calc(100% - 200px)"}},null,8,["value"]),e[24]||(e[24]=a()),t(T,{title:"点击生成小程序二维码"},{default:o(()=>[t(f,{type:"primary",onClick:j},{icon:o(()=>[t(Q)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e[30]||(e[30]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"title",label:"标题","has-feedback":"",rules:[{required:!0,message:"标题必填"}]},{default:o(()=>[t(p,{value:n(l).title,"onUpdate:value":e[1]||(e[1]=r=>n(l).title=r)},null,8,["value"])]),_:1})]),_:1}),e[31]||(e[31]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"类别",name:"event_type",rules:[{required:!0,message:"请选类别"}]},{default:o(()=>[t(G,{value:n(l).event_type,"onUpdate:value":e[2]||(e[2]=r=>n(l).event_type=r)},{default:o(()=>[t(V,{value:"professional"},{default:o(()=>e[25]||(e[25]=[a("专业")])),_:1}),e[27]||(e[27]=a()),t(V,{value:"outdoor"},{default:o(()=>e[26]||(e[26]=[a("户外")])),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e[32]||(e[32]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"sport_type_id",label:"运动类型",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(v,{value:n(l).sport_type_id,"onUpdate:value":e[3]||(e[3]=r=>n(l).sport_type_id=r),options:n(d).sport_types},null,8,["value","options"])]),_:1})]),_:1}),e[33]||(e[33]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"format",label:"比赛形式",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(p,{value:n(l).format,"onUpdate:value":e[4]||(e[4]=r=>n(l).format=r),placeholder:"如：3v3,2v2，5v5等"},null,8,["value"])]),_:1})]),_:1}),e[34]||(e[34]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"cover_image",label:"封面",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(K,null,{default:o(()=>[t(J,{modelValue:n(l).cover_image,"onUpdate:modelValue":e[5]||(e[5]=r=>n(l).cover_image=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e[35]||(e[35]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"max_participants",label:"最大参赛人数",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(F,{value:n(l).max_participants,"onUpdate:value":e[6]||(e[6]=r=>n(l).max_participants=r)},null,8,["value"])]),_:1}),e[28]||(e[28]=a()),t(s,{name:"min_participants",label:"最小开赛人数",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(F,{value:n(l).min_participants,"onUpdate:value":e[7]||(e[7]=r=>n(l).min_participants=r)},null,8,["value"])]),_:1})]),_:1}),e[36]||(e[36]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"start_time",label:"开赛时间",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(x,{value:n(l).start_time,"onUpdate:value":e[8]||(e[8]=r=>n(l).start_time=r),format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:n(Y)("00:00:00","HH:mm:ss")}},null,8,["value","show-time"])]),_:1}),e[29]||(e[29]=a()),t(s,{name:"end_time",label:"结束时间",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(x,{value:n(l).end_time,"onUpdate:value":e[9]||(e[9]=r=>n(l).end_time=r),format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:n(Y)("00:00:00","HH:mm:ss")}},null,8,["value","show-time"])]),_:1})]),_:1}),e[37]||(e[37]=a()),t(u,{span:24},{default:o(()=>[t(s,{label:"介绍",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(s,{name:"description"},{default:o(()=>[t(g,{value:n(l).description,"onUpdate:value":e[10]||(e[10]=r=>n(l).description=r)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e[38]||(e[38]=a()),t(u,{span:12},{default:o(()=>[t(s,{name:"registration_deadline",label:"报名截止时间",rules:[{required:!0,message:"必填"}]},{default:o(()=>[t(x,{value:n(l).registration_deadline,"onUpdate:value":e[11]||(e[11]=r=>n(l).registration_deadline=r),format:"YYYY-MM-DD HH:mm:ss","show-time":{defaultValue:n(Y)("00:00:00","HH:mm:ss")}},null,8,["value","show-time"])]),_:1})]),_:1})]),_:1},512),[[S,n(i)===0]]),e[56]||(e[56]=a()),$(t(C,{gutter:[32,8]},{default:o(()=>[t(u,{span:12},{default:o(()=>[t(s,{label:"地址",name:"outdoor_form.location"},{default:o(()=>[t(p,{value:n(l).outdoor_form.location,"onUpdate:value":e[12]||(e[12]=r=>n(l).outdoor_form.location=r)},null,8,["value"])]),_:1})]),_:1}),e[41]||(e[41]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"集合地点",name:"outdoor_form.meeting_point"},{default:o(()=>[t(p,{value:n(l).outdoor_form.meeting_point,"onUpdate:value":e[13]||(e[13]=r=>n(l).outdoor_form.meeting_point=r)},null,8,["value"])]),_:1})]),_:1}),e[42]||(e[42]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"联系人",name:"outdoor_form.contact_person"},{default:o(()=>[t(p,{value:n(l).outdoor_form.contact_person,"onUpdate:value":e[14]||(e[14]=r=>n(l).outdoor_form.contact_person=r)},null,8,["value"])]),_:1})]),_:1}),e[43]||(e[43]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"联系电话",name:"outdoor_form.contact_phone"},{default:o(()=>[t(p,{value:n(l).outdoor_form.contact_phone,"onUpdate:value":e[15]||(e[15]=r=>n(l).outdoor_form.contact_phone=r)},null,8,["value"])]),_:1})]),_:1}),e[44]||(e[44]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"需自带装备",name:"outdoor_form.bring_equipment"},{default:o(()=>[t(p,{value:n(l).outdoor_form.bring_equipment,"onUpdate:value":e[16]||(e[16]=r=>n(l).outdoor_form.bring_equipment=r)},null,8,["value"])]),_:1})]),_:1}),e[45]||(e[45]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"雨天备选方案",name:"outdoor_form.weather_plan"},{default:o(()=>[t(g,{value:n(l).outdoor_form.weather_plan,"onUpdate:value":e[17]||(e[17]=r=>n(l).outdoor_form.weather_plan=r)},null,8,["value"])]),_:1})]),_:1}),e[46]||(e[46]=a()),t(u,{span:24},{default:o(()=>[t(s,{label:"坐标",name:"outdoor_form.gps"},{default:o(()=>{var r,D;return[t(W,{message:`【精度：${(r=n(l).outdoor_form.gps)==null?void 0:r.coordinates[0]}
               纬度：${(D=n(l).outdoor_form.gps)==null?void 0:D.coordinates[1]}】`,type:"info"},null,8,["message"]),e[39]||(e[39]=a()),e[40]||(e[40]=_("div",{id:"container"},null,-1))]}),_:1})]),_:1})]),_:1},512),[[S,n(i)===1&&n(l).event_type=="outdoor"]]),e[57]||(e[57]=a()),n(i)===1&&n(l).event_type=="professional"?(m(),b(C,{key:0,gutter:[32,8]},{default:o(()=>[t(u,{span:12},{default:o(()=>[t(s,{label:"场馆",name:"professional_form.venue_id"},{default:o(()=>[t(v,{value:n(l).professional_form.venue_id,"onUpdate:value":e[18]||(e[18]=r=>n(l).professional_form.venue_id=r),options:n(d).venues},null,8,["value","options"])]),_:1})]),_:1}),e[47]||(e[47]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"门票",name:"professional_form.ticket_id"},{default:o(()=>[t(v,{value:n(l).professional_form.ticket_id,"onUpdate:value":e[19]||(e[19]=r=>n(l).professional_form.ticket_id=r),options:n(d).tickets},null,8,["value","options"])]),_:1})]),_:1}),e[48]||(e[48]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"裁判",name:"professional_form.referee_id"},{default:o(()=>[t(v,{value:n(l).professional_form.referee_id,"onUpdate:value":e[20]||(e[20]=r=>n(l).professional_form.referee_id=r),options:n(d).coaches},{default:o(()=>[t(X)]),_:1},8,["value","options"])]),_:1})]),_:1}),e[49]||(e[49]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"装备",name:"professional_form.equipment_provided"},{default:o(()=>[t(g,{value:n(l).professional_form.equipment_provided,"onUpdate:value":e[21]||(e[21]=r=>n(l).professional_form.equipment_provided=r)},null,8,["value"])]),_:1})]),_:1}),e[50]||(e[50]=a()),t(u,{span:12},{default:o(()=>[t(s,{label:"比赛规则",name:"professional_form.rules_description"},{default:o(()=>[t(g,{value:n(l).professional_form.rules_description,"onUpdate:value":e[22]||(e[22]=r=>n(l).professional_form.rules_description=r)},null,8,["value"])]),_:1})]),_:1})]),_:1})):k("",!0),e[58]||(e[58]=a()),t(s,{"wrapper-col":{span:12,offset:10}},{default:o(()=>[_("div",Me,[n(i)<U.length-1?(m(),b(f,{key:0,type:"primary",onClick:N},{default:o(()=>e[51]||(e[51]=[a("下一步")])),_:1})):k("",!0),e[54]||(e[54]=a()),n(i)>0?(m(),b(f,{key:1,style:{"margin-left":"8px"},onClick:R},{default:o(()=>e[52]||(e[52]=[a("上一步")])),_:1})):k("",!0),e[55]||(e[55]=a()),n(i)==U.length-1?(m(),b(f,{key:2,type:"primary","html-type":"submit",onClick:A},{default:o(()=>e[53]||(e[53]=[a(`\r
              完成提交\r
            `)])),_:1})):k("",!0)])]),_:1})]),_:1},8,["model"])])])}}});const It=Ce($e,[["__scopeId","data-v-b161963a"]]);export{It as default};
//# sourceMappingURL=form.4661b6d8.1753605037589.js.map
