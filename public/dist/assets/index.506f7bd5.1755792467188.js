import{e as A,V as F,k as N,l as U,W as V,i as j}from"./ant-design-vue.c3fbb4a2.1755792467188.js";import{X as G}from"./xe-utils.39ffc0d7.1755792467188.js";import{r as H,A as v,a as T}from"./index-5b87c1a0.js";import{e as K,k as W,r as n,a1 as X,Z as x,_ as k,c as r,a3 as t,$ as y,I as o,a4 as J,bs as L,u as g,J as S,F as M,a7 as Q,a2 as Z,a5 as z}from"./@vue.f517c4d3.1755792467188.js";import"./@babel.ff5fac95.1755792467188.js";import"./resize-observer-polyfill.0f9f8adb.1755792467188.js";import"./vue-types.ef06c517.1755792467188.js";import"./@ant-design.d77fe5f1.1755792467188.js";import"./@ctrl.110cde02.1755792467188.js";import"./dom-align.ecb06dd6.1755792467188.js";import"./lodash-es.3d27f5e2.1755792467188.js";import"./dayjs.543bbd08.1755792467188.js";import"./async-validator.dee29e8b.1755792467188.js";import"./scroll-into-view-if-needed.8e7fce00.1755792467188.js";import"./compute-scroll-into-view.183f845a.1755792467188.js";import"./vue-router.807cfa9b.1755792467188.js";import"./pinia.629b25e3.1755792467188.js";import"./vue-demi.71ba0ef2.1755792467188.js";import"./axios.dcb3bfcc.1755792467188.js";import"./qs.e64ea9ff.1755792467188.js";import"./side-channel.edfc9895.1755792467188.js";import"./es-errors.c75f5a96.1755792467188.js";import"./object-inspect.c20249f2.1755792467188.js";import"./side-channel-list.2599c8b8.1755792467188.js";import"./side-channel-map.74494a8c.1755792467188.js";import"./get-intrinsic.b69a201b.1755792467188.js";import"./es-object-atoms.11ea1ab9.1755792467188.js";import"./math-intrinsics.9389030e.1755792467188.js";import"./gopd.30775706.1755792467188.js";import"./es-define-property.27915812.1755792467188.js";import"./has-symbols.76fb15e9.1755792467188.js";import"./get-proto.7c9e6c71.1755792467188.js";import"./dunder-proto.a078516e.1755792467188.js";import"./call-bind-apply-helpers.3b76562e.1755792467188.js";import"./function-bind.61637ca6.1755792467188.js";import"./hasown.8e5a70c6.1755792467188.js";import"./call-bound.687ab089.1755792467188.js";import"./side-channel-weakmap.72e95561.1755792467188.js";import"./stepin.4d6f3e9a.1755792467188.js";import"./enquire.js.29d23a08.1755792467188.js";import"./lodash.3ea38ae2.1755792467188.js";import"./js-cookie.df2f1d76.1755792467188.js";import"./@vueuse.fa9e9e6d.1755792467188.js";import"./clipboard.d0629ef3.1755792467188.js";import"./highlight.js.c068919e.1755792467188.js";import"./nprogress.62b5d85f.1755792467188.js";import"./vxe-table.b83dc417.1755792467188.js";import"./@vxe-ui.b726cf5f.1755792467188.js";import"./dom-zindex.d72a3c32.1755792467188.js";import"./vue.ad52f98b.1755792467188.js";import"./vxe-pc-ui.ffb5ea22.1755792467188.js";import"./vue-pick-colors.f3ff9685.1755792467188.js";import"./@popperjs.f3391c26.1755792467188.js";const Y=()=>({gridOptions:K({border:"full",size:"small",showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,autoResize:!0,expandConfig:{trigger:"row",showIcon:!0,expandRowKeys:[1,2],iconOpen:"vxe-icon--caret-bottom",iconClose:"vxe-icon--caret-top"},formConfig:{titleWidth:120,titleAlign:"right",items:[{field:"name",title:"角色名称",span:6,itemRender:{name:"$input",props:{placeholder:"请输入角色名称"}}},{field:"label",title:"角色标题",span:6,itemRender:{name:"$input",props:{placeholder:"请输入用户手机号"}}},{span:8,align:"left",collapseNode:!0,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]},stripe:!0,id:"full_edit_9999",rowConfig:{keyField:"#",isHover:!0,useKey:!0},columnConfig:{resizable:!0},customConfig:{storage:!0,checkMethod({column:u}){return!["name","no"].includes(u.field)}},printConfig:{columns:[{field:"name"}]},sortConfig:{trigger:"cell",remote:!0},filterConfig:{remote:!0},pagerConfig:{enabled:!0,pageSize:10,pageSizes:[5,10,15,20,50,100,200,500,1e3]},toolbarConfig:{buttons:[],refresh:!0,import:!1,export:!0,print:!0,zoom:!0,custom:!0},proxyConfig:{seq:!0,sort:!0,filter:!0,form:!0,props:{result:"data",total:"total"},ajax:{query:({page:u,sorts:c,filters:_,form:s})=>{const m=Object.assign({},s),d=c[0];return d&&(m.sort=d.field,m.order=d.order),_.forEach(({field:f,values:l})=>{m[f]=l.join(",")}),H({url:`/api/admin/role?pageSize=${u.pageSize}&currentPage=${u.currentPage}&${G.serialize(m)}`,method:"GET"})}}},columns:[{field:"id",title:"序号",width:100},{field:"name",title:"角色名称",width:300,sortable:!0},{field:"label",title:"角色标题",width:200,sortable:!0},{field:"remark",title:"角色备注"},{field:"action",title:"操作",sortable:!0,slots:{default:"action"},width:320}],importConfig:{},exportConfig:{},checkboxConfig:{labelField:"ID",checkStrictly:!0},editRules:{name:[{required:!0,message:"必填"},{min:3,max:50,message:"名称长度在 3 到 50 个字符"}],no:[{required:!0,message:"必填"}]},editConfig:{trigger:"click",mode:"row",showStatus:!0,showUpdateStatus:!0,showInsertStatus:!0,autoClear:!0}})}),ee={class:"text-sm text-blue-500"},te=W({__name:"index",setup($){const{gridOptions:u}=Y(),c=n(),_={proxyQuery(){console.log("数据代理查询事件"),c.value.getTableData().fullData},proxyDelete(){console.log("数据代理删除事件")},proxySave(){console.log("数据代理保存事件")}},s=n(!1),m=n(null),d=async a=>{s.value=!0,m.value=a.id,await D(a.id)},f=()=>{s.value=!1};n();const l=n([]),b=n([]),C=n(null),D=async a=>{C.value=a;let e=await v.roleController.permissions({id:a});l.value=e.map(p=>p.id)};n([]);const I=async()=>{b.value=await v.permissionController.option()},O=async()=>{await v.roleController.syncPermissions({id:C.value},{formIDs:l.value})};return I(),(a,e)=>{const p=A,P=X("vxe-grid"),R=F,q=N,h=U,B=V,E=j;return x(),k("div",null,[r(P,J({ref_key:"xGrid",ref:c},g(u),L(_)),{action:t(({row:i})=>[y("div",null,[r(p,{type:"primary"},{default:t(()=>e[2]||(e[2]=[o("删除")])),_:1}),e[5]||(e[5]=o()),r(p,{type:"primary"},{default:t(()=>e[3]||(e[3]=[o("编辑")])),_:1}),e[6]||(e[6]=o()),r(p,{type:"primary",onClick:w=>d(i)},{default:t(()=>e[4]||(e[4]=[o("权限")])),_:2},1032,["onClick"])])]),_:1},16),e[11]||(e[11]=o()),r(E,{title:"权限",size:"large",visible:g(s),"onUpdate:visible":e[1]||(e[1]=i=>S(s)?s.value=i:null),onClose:f},{extra:t(()=>[r(p,{style:{"margin-right":"8px"},onClick:f},{default:t(()=>e[7]||(e[7]=[o("取消")])),_:1}),e[9]||(e[9]=o()),r(p,{type:"primary",onClick:O},{default:t(()=>e[8]||(e[8]=[o("确认")])),_:1})]),default:t(()=>[e[10]||(e[10]=o()),y("div",null,[r(B,{value:g(l),"onUpdate:value":e[0]||(e[0]=i=>S(l)?l.value=i:null)},{default:t(()=>[r(h,{gutter:[16,16]},{default:t(()=>[(x(!0),k(M,null,Q(g(b),(i,w)=>(x(),Z(q,{span:12,key:w},{default:t(()=>[r(R,{value:i.value},{default:t(()=>[o(z(i.label)+" ",1),y("span",ee,z(i.code),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])])]),_:1},8,["visible"])])}}});const tt=T(te,[["__scopeId","data-v-cbd569c0"]]);export{tt as default};
//# sourceMappingURL=index.506f7bd5.1755792467188.js.map
