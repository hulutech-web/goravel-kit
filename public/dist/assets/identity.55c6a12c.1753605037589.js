import{b as $,g as R,y as w,E as S}from"./ant-design-vue.00fd9e7c.1753605037589.js";import{_ as z}from"./FileSelect.vue_vue_type_script_setup_true_lang.c8ce7069.1753605037589.js";import{r as U,e as E,A as x,f as q,a as O}from"./index-a4f0172e.js";import{X as I}from"./xe-utils.0b26132f.1753605037589.js";import{f as P,d as A,r as B,a1 as v,Z as F,_ as N,c as i,a3 as l,$ as y,u as c,I as p,a4 as j,bs as G}from"./@vue.3ad65df9.1753605037589.js";import{u as H}from"./vue-router.9360959a.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";import"./resize-observer-polyfill.0f9f8adb.1753605037589.js";import"./vue-types.ef06c517.1753605037589.js";import"./@ant-design.002a57d7.1753605037589.js";import"./@ctrl.110cde02.1753605037589.js";import"./dom-align.ecb06dd6.1753605037589.js";import"./lodash-es.3d27f5e2.1753605037589.js";import"./dayjs.d60d73bd.1753605037589.js";import"./async-validator.dee29e8b.1753605037589.js";import"./scroll-into-view-if-needed.583c97c5.1753605037589.js";import"./compute-scroll-into-view.183f845a.1753605037589.js";import"./pinia.11f4bfaa.1753605037589.js";import"./vue-demi.71ba0ef2.1753605037589.js";import"./axios.dcb3bfcc.1753605037589.js";import"./qs.247a6393.1753605037589.js";import"./side-channel.9d8f1847.1753605037589.js";import"./es-errors.c75f5a96.1753605037589.js";import"./object-inspect.0fbacf7d.1753605037589.js";import"./side-channel-list.c76608c5.1753605037589.js";import"./side-channel-map.76c430fe.1753605037589.js";import"./get-intrinsic.7d53f00e.1753605037589.js";import"./es-object-atoms.11ea1ab9.1753605037589.js";import"./math-intrinsics.9389030e.1753605037589.js";import"./gopd.30775706.1753605037589.js";import"./es-define-property.27915812.1753605037589.js";import"./has-symbols.76fb15e9.1753605037589.js";import"./get-proto.757e385d.1753605037589.js";import"./dunder-proto.05150bcd.1753605037589.js";import"./call-bind-apply-helpers.0833f3e9.1753605037589.js";import"./function-bind.61637ca6.1753605037589.js";import"./hasown.67f3f833.1753605037589.js";import"./call-bound.09054f06.1753605037589.js";import"./side-channel-weakmap.4b9abb6a.1753605037589.js";import"./stepin.df3b4e80.1753605037589.js";import"./enquire.js.29d23a08.1753605037589.js";import"./lodash.5999789d.1753605037589.js";import"./js-cookie.df2f1d76.1753605037589.js";import"./@vueuse.60746e97.1753605037589.js";import"./clipboard.f49c93fb.1753605037589.js";import"./highlight.js.1f23b1ae.1753605037589.js";import"./nprogress.dafb99c9.1753605037589.js";import"./vxe-table.a5304289.1753605037589.js";import"./@vxe-ui.1c5cc959.1753605037589.js";import"./dom-zindex.d72a3c32.1753605037589.js";import"./vue.5e2bff9c.1753605037589.js";import"./vxe-pc-ui.ed308165.1753605037589.js";import"./vue-pick-colors.10d84206.1753605037589.js";import"./@popperjs.f3391c26.1753605037589.js";const T=()=>({gridOptions:P({border:"full",size:"small",showHeaderOverflow:!0,showOverflow:!0,keepSource:!0,autoResize:!0,cellConfig:{height:110},expandConfig:{trigger:"row",showIcon:!0,expandRowKeys:[1,2],iconOpen:"vxe-icon--caret-bottom",iconClose:"vxe-icon--caret-top"},formConfig:{titleWidth:120,titleAlign:"right",items:[{field:"name",title:"场馆名",span:6,itemRender:{name:"$input",props:{placeholder:"请输入标题"}}},{span:8,align:"left",collapseNode:!0,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"搜索",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]},stripe:!0,id:"full_edit_9999",rowConfig:{keyField:"#",isHover:!0,useKey:!0},columnConfig:{resizable:!0},customConfig:{storage:!0,checkMethod({column:r}){return!["name","no"].includes(r.field)}},printConfig:{columns:[{field:"name"}]},sortConfig:{trigger:"cell",remote:!0},filterConfig:{remote:!0},pagerConfig:{enabled:!0,pageSize:10,pageSizes:[5,10,15,20,50,100,200,500,1e3]},toolbarConfig:{buttons:[{code:"insert_edit",name:"新增",status:"primary"},{code:"save",name:"保存",status:"success"}],refresh:!0,import:!1,export:!0,print:!0,zoom:!0,custom:!0},proxyConfig:{seq:!0,sort:!0,filter:!0,form:!0,props:{result:"data",total:"total"},showResponseMsg:!1,ajax:{query:async({page:r,sorts:s,filters:a,form:n})=>{const o=Object.assign({},n),u=s[0];return u&&(o.sort=u.field,o.order=u.order),a.forEach(({field:f,values:m})=>{o[f]=m.join(",")}),U({url:`/api/admin/venue_identity_record?pageSize=${r.pageSize}&currentPage=${r.currentPage}&${I.serialize(o)}`,method:"GET"})},delete:({body:r})=>{const s=r.removeRecords.map(a=>a.id);return E(s)},save:({body:r})=>{const{insertRecords:s,updateRecords:a}=r,n=[];return s.length>0&&s.forEach(o=>{n.push(x.identityController.store(o))}),a.length>0&&a.forEach(o=>{n.push(x.identityController.update({id:o.id},o))}),Promise.all(n)}}},columns:[{field:"id",title:"序号",width:100},{field:"name",title:"场馆名"},{field:"user_id",title:"发起人编号",sortable:!0},{field:"main_pic",title:"首页图片",slots:{default:"main_pic"}},{field:"realname",title:"法人姓名"},{field:"phone",title:"电话"},{field:"id_card_number",title:"证件号"},{field:"id_card_front",title:"身份证正面",slots:{default:"id_card_front"}},{field:"id_card_back",title:"身份证背面",slots:{default:"id_card_back"}},{field:"registration_code",title:"营业执照号"},{field:"created_at",title:"提交时间"},{field:"error_msg",title:"审核建议",editRender:{name:"VxeTextarea",placeholder:"请输入描述"}},{field:"status",title:"审核",sortable:!0,editRender:{name:"ASelect",defaultValue:2,options:[{label:"已发起",value:1},{label:"驳回",value:2},{label:"通过",value:3}]}},{field:"action",title:"操作",sortable:!0,slots:{default:"action"}}],importConfig:{},exportConfig:{},checkboxConfig:{labelField:"ID",checkStrictly:!0},editRules:{name:[{required:!0,message:"必填"},{min:3,max:50,message:"名称长度在 3 到 50 个字符"}],no:[{required:!0,message:"必填"}]},editConfig:{trigger:"click",mode:"row",showStatus:!0,showUpdateStatus:!0,showInsertStatus:!0,autoClear:!0}})}),K={class:"demo-page-wrapper"},M={style:{display:"flex","flex-direction":"column"}},X={style:{display:"flex","flex-direction":"column"}},D={style:{display:"flex","flex-direction":"column"}},Q=A({__name:"identity",setup(C){const r="https://hongyu.cyou",s=H(),{gridOptions:a}=T(),n=B(),o=m=>{s.push({path:`/venue/${m.id}/confirm`})},u=async m=>{try{await q({id:m.id}),n.value.commitProxy("query")}catch{$.error("删除失败")}},f={proxyQuery(){n.value.getColumnByField("venue_id")}};return(m,t)=>{const _=v("vxe-image"),g=z,h=R,b=w,k=S,V=v("vxe-grid");return F(),N("div",K,[i(V,j({ref_key:"xGrid",ref:n},c(a),G(f)),{main_pic:l(({row:e})=>[y("div",M,[i(_,{src:`${c(r)}${e.main_pic}`,width:"64",height:"64"},null,8,["src"]),t[0]||(t[0]=p()),i(g,{ref:"fileRef",modelValue:e.main_pic,"onUpdate:modelValue":d=>e.main_pic=d},null,8,["modelValue","onUpdate:modelValue"])])]),id_card_front:l(({row:e})=>[y("div",X,[i(_,{src:`${c(r)}${e.id_card_front}`,width:"64",height:"64"},null,8,["src"]),t[1]||(t[1]=p()),i(g,{ref:"fileRef",modelValue:e.id_card_front,"onUpdate:modelValue":d=>e.id_card_front=d},null,8,["modelValue","onUpdate:modelValue"])])]),id_card_back:l(({row:e})=>[y("div",D,[i(_,{src:`${c(r)}${e.id_card_back}`,width:"64",height:"64"},null,8,["src"]),t[2]||(t[2]=p()),i(g,{ref:"fileRef",modelValue:e.id_card_back,"onUpdate:modelValue":d=>e.id_card_back=d},null,8,["modelValue","onUpdate:modelValue"])])]),action:l(({row:e})=>[i(k,null,{default:l(()=>[i(b,{title:"确认删除吗？","ok-text":"是","cancel-text":"否",onConfirm:d=>u(e)},{default:l(()=>[i(h,{size:"small",type:"primary",danger:""},{default:l(()=>t[3]||(t[3]=[p("删除")])),_:1})]),_:2},1032,["onConfirm"]),t[5]||(t[5]=p()),i(h,{size:"small",type:"primary",onClick:d=>o(e),danger:""},{default:l(()=>t[4]||(t[4]=[p("审核")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1},16)])}}});const We=O(Q,[["__scopeId","data-v-0e04e5e2"]]);export{We as default};
//# sourceMappingURL=identity.55c6a12c.1753605037589.js.map
