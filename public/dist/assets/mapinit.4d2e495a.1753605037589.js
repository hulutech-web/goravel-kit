import{c as d}from"./coordtransform.c5296600.1753605037589.js";import{f as g}from"./@vue.3ad65df9.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";let a=null,i={lat:null,lng:null,address:""};const n=g({markerLayer:"",marker:null,infoWindow:null,value:1}),c=t=>{n.marker=new TMap.MultiMarker({map:a,geometries:[{position:new TMap.LatLng(t.lat,t.lng)}]})},w=t=>new Promise((o,r)=>{const l=new TMap.service.Geocoder,s=new TMap.LatLng(t.latLng.lat,t.latLng.lng);l.getAddress({location:s}).then(e=>{e.status===0&&(n.infoWindow.open(),n.infoWindow.setPosition(t.latLng),n.infoWindow.setContent(e.result.address),i.address=e.result.address,o(i))})}),m=(t,o)=>{const r=window.TMap;a&&a.destroy();let l=null;o&&Array.isArray(o)&&o.length>0?l=d.wgs84togcj02(o[0],o[1]):l=d.wgs84togcj02(31.20929040462313,107.46796970075786);const s=new r.LatLng(l[0],l[1]);a=new r.Map(document.getElementById("container"),{center:s,zoom:14,viewMode:"3D"}),c(s),a.on("click",e=>{n.marker.setMap(null),n.infoWindow.close(),n.marker=null,c(e.latLng),i.lat=e.latLng.lat,i.lng=e.latLng.lng,w(e).then(f=>{t(i)})}),n.infoWindow=new r.InfoWindow({map:a,position:s,offset:{x:0,y:-32}}),n.infoWindow.close()},M=m;export{M as default};
//# sourceMappingURL=mapinit.4d2e495a.1753605037589.js.map
