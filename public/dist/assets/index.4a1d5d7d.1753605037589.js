import{$ as ge,k as ye,B as be,h as ke,T as xe,a6 as Ce,s as oe,g as Se,y as we,a5 as Ie,I as Me,t as Le,a8 as $e,a2 as Ue,p as Be,r as Te,L as Ve,f as Ae,R as Oe,q as ze,F as Ne,o as De}from"./ant-design-vue.00fd9e7c.1753605037589.js";import{d as H,a as T,Z as y,_ as N,$ as D,F as j,a7 as le,S as Fe,a2 as $,a4 as Z,I as a,j as Q,a5 as ae,r as w,a1 as ie,a3 as l,c as o,a0 as W,G as Re,aj as J,u as q,J as qe,f as je,w as te,e as Ee,A as Pe,z as Ge}from"./@vue.3ad65df9.1753605037589.js";import{a as se,j as he,c as Ke,A as R,k as We}from"./index-a4f0172e.js";import{l as Ze}from"./lodash.5999789d.1753605037589.js";import{al as ne}from"./@ant-design.002a57d7.1753605037589.js";import{s as Je}from"./pinia.11f4bfaa.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";import"./resize-observer-polyfill.0f9f8adb.1753605037589.js";import"./vue-types.ef06c517.1753605037589.js";import"./@ctrl.110cde02.1753605037589.js";import"./dom-align.ecb06dd6.1753605037589.js";import"./lodash-es.3d27f5e2.1753605037589.js";import"./dayjs.d60d73bd.1753605037589.js";import"./async-validator.dee29e8b.1753605037589.js";import"./scroll-into-view-if-needed.583c97c5.1753605037589.js";import"./compute-scroll-into-view.183f845a.1753605037589.js";import"./vue-router.9360959a.1753605037589.js";import"./axios.dcb3bfcc.1753605037589.js";import"./qs.247a6393.1753605037589.js";import"./side-channel.9d8f1847.1753605037589.js";import"./es-errors.c75f5a96.1753605037589.js";import"./object-inspect.0fbacf7d.1753605037589.js";import"./side-channel-list.c76608c5.1753605037589.js";import"./side-channel-map.76c430fe.1753605037589.js";import"./get-intrinsic.7d53f00e.1753605037589.js";import"./es-object-atoms.11ea1ab9.1753605037589.js";import"./math-intrinsics.9389030e.1753605037589.js";import"./gopd.30775706.1753605037589.js";import"./es-define-property.27915812.1753605037589.js";import"./has-symbols.76fb15e9.1753605037589.js";import"./get-proto.757e385d.1753605037589.js";import"./dunder-proto.05150bcd.1753605037589.js";import"./call-bind-apply-helpers.0833f3e9.1753605037589.js";import"./function-bind.61637ca6.1753605037589.js";import"./hasown.67f3f833.1753605037589.js";import"./call-bound.09054f06.1753605037589.js";import"./side-channel-weakmap.4b9abb6a.1753605037589.js";import"./stepin.df3b4e80.1753605037589.js";import"./enquire.js.29d23a08.1753605037589.js";import"./js-cookie.df2f1d76.1753605037589.js";import"./@vueuse.60746e97.1753605037589.js";import"./clipboard.f49c93fb.1753605037589.js";import"./highlight.js.1f23b1ae.1753605037589.js";import"./nprogress.dafb99c9.1753605037589.js";import"./vxe-table.a5304289.1753605037589.js";import"./xe-utils.0b26132f.1753605037589.js";import"./@vxe-ui.1c5cc959.1753605037589.js";import"./dom-zindex.d72a3c32.1753605037589.js";import"./vue.5e2bff9c.1753605037589.js";import"./vxe-pc-ui.ed308165.1753605037589.js";import"./vue-pick-colors.10d84206.1753605037589.js";import"./@popperjs.f3391c26.1753605037589.js";import"./vue-demi.71ba0ef2.1753605037589.js";const He=H({__name:"GridList",props:{pagination:{type:[Object,Boolean]},column:{type:Number,default:8},gap:[Array,Number],dataSource:{type:Array,default:[]}},setup(b){const c=b,m=T(()=>c.pagination&&typeof c.pagination=="boolean"?{}:c.pagination??{}),U=T(()=>{var t,I;if(typeof c.pagination=="boolean"&&!c.pagination)return(t=c.dataSource)==null?void 0:t.slice(0);const{current:x=1,pageSize:_=10}=m.value;let g=0,C=_;return c.dataSource.length>_&&(g=(x-1)*_,C=x*_),(I=c.dataSource)==null?void 0:I.slice(g,C)}),V=T(()=>U.value.length>0?c.column:1);return(x,_)=>{var t;const g=ye,C=ge;return y(),N(j,null,[D("div",Z(x.$attrs,{class:"grid-list grid",style:`${b.column?"grid-template-columns:repeat("+V.value+", minmax(0, 1fr))":""}`}),[U.value.length>0?(y(!0),N(j,{key:0},le(U.value,I=>Fe(x.$slots,"renderItem",{item:I},()=>[a(ae(I),1)],!0)),256)):(y(),$(g,{key:1}))],16),_[0]||(_[0]=a()),b.pagination?(y(),$(C,Z({key:0,class:"mt-3"},{total:(t=b.dataSource)==null?void 0:t.length,...b.pagination}),null,16)):Q("",!0)],64)}}});const Qe=se(He,[["__scopeId","data-v-7f13cee3"]]),Xe=["onClick"],Ye={class:"mx-0.5 bg-bg-disabled p-1 rounded-sm flex items-center cursor-pointer"},et=H({__name:"IconSelector",props:{mode:{type:String,default:"multiple"},value:{type:[Array,String,Number],default(b){b.mode==="multiple"||b.mode}},column:{type:Number,default:8},placeholder:{type:String,default:"选择图标，输入文字搜索..."},options:{type:[Array,Array],default:[]}},emits:["update:value"],setup(b,{emit:c}){var F;const m=b,U=c,V={pageSize:m.column*5,hideOnSinglePage:!0,showSizeChanger:!1,size:"small"},x=w(!1),_=T(()=>m.mode==="multiple"),g=T(()=>m.options.length===0||m.options[0].title!==void 0?m.options.map(i=>({...i,_current:w(1),_searchList:i.list})):[{title:"全部图标",key:"__dft",list:m.options,_current:w(1),_searchList:[...m.options]}]),C=T(()=>{const i=new Map;return g.value.flatMap(s=>s.list).forEach(s=>{i.set(s.value,s)}),i}),{value:t}=he(()=>Array.isArray(m.value)||m.value===void 0?m.value:[m.value],i=>U("update:value",_.value?i:i==null?void 0:i[0]));function I(i){var f;(((f=t.value)==null?void 0:f.indexOf(i.value))??-1)===-1?t.value=_.value?[...t.value??[],i.value]:[i.value]:_.value&&M(i.value),_.value||(x.value=!1),L.value="",A("")}function M(i){var f,n;(((f=t.value)==null?void 0:f.findIndex(e=>e===i))??-1)>=0&&(t.value=(n=t.value)==null?void 0:n.filter(e=>e!==i))}function A(i){const s=i==="",f=g.value.find(p=>p.key===v.value),n=new RegExp(i.toLowerCase()),e=(p,S)=>S.filter(B=>p.test(B.label.toLocaleLowerCase()));f._searchList=s?[...f.list]:e(n,f.list),setTimeout(()=>{g.value.filter(p=>p!==f).forEach(p=>{p._searchList=s?[...p.list]:e(n,p.list)})}),z.value=!1}const E=Ze.debounce(A,300);function O(i){L.value=i,z.value=!0,E(i)}const v=w((F=g.value[0])==null?void 0:F.key),L=w(""),z=w(!1);function P(i){var s;return(s=t.value)==null?void 0:s.includes(i.value)}return(i,s)=>{const f=be,n=ke,e=xe,p=Ce,S=ie("CloseOutlined"),B=oe;return y(),$(B,Z({onClick:s[2]||(s[2]=()=>x.value=!0),showSearch:!0,mode:"multiple",value:q(t),"onUpdate:value":s[3]||(s[3]=r=>qe(t)?t.value=r:null),open:x.value,onBlur:s[4]||(s[4]=()=>x.value=!1),onSearch:O,searchValue:L.value},{placeholder:b.placeholder},{"allow-clear":""}),{dropdownRender:l(()=>[o(p,{tip:"搜索中...",spinning:z.value},{default:l(()=>[o(e,{activeKey:v.value,"onUpdate:activeKey":s[0]||(s[0]=r=>v.value=r),class:W(["icon-selector","px-base","pb-base",{"no-group pt-[12px]":g.value.length===1&&g.value[0].key==="__dft"}]),onMousedown:s[1]||(s[1]=Re(()=>{},["prevent"]))},{default:l(()=>[(y(!0),N(j,null,le(g.value,r=>(y(),$(n,{key:r.key},{tab:l(()=>[o(f,{class:W({"text-primary-500":v.value===r.key}),count:r._searchList.length===r.list.length?void 0:r._searchList.length,showZero:""},{default:l(()=>[a(ae(r.title),1)]),_:2},1032,["class","count"])]),default:l(()=>[s[5]||(s[5]=a()),o(Qe,{class:"icon-container",dataSource:r._searchList,column:b.column,pagination:{...V,current:r._current.value,"onUpdate:current":d=>r._current.value=d}},{renderItem:l(({item:d})=>[D("div",{onClick:k=>I(d),class:W(`icon-item bg-container cursor-pointer h-10 w-10 flex justify-center items-center ${P(d)?"bg-primary-100":""}`)},[(y(),$(J(d.component),{class:"icon transition"}))],10,Xe)]),_:2},1032,["dataSource","column","pagination"])]),_:2},1024))),128))]),_:1},8,["activeKey","class"])]),_:1},8,["spinning"])]),tagRender:l(r=>{var d;return[D("div",Ye,[(y(),$(J((d=C.value.get(r.value))==null?void 0:d.component))),s[6]||(s[6]=a()),_.value?(y(),$(S,{key:0,class:"text-subtext text-[10px] ml-1 hover:text-text",onClick:k=>M(r.value)},null,8,["onClick"])):Q("",!0)])]}),_:1},16,["value","open","searchValue"])}}});const tt=se(et,[["__scopeId","data-v-ea40d695"]]),nt={class:"authority"},ot={class:"flex justify-between"},lt={class:"flex"},an=H({__name:"index",setup(b){const{useAuth:c}=Ke(),m={title:"线框风",key:"outlined",list:[]},U={title:"实底风",key:"filled",list:[]},V={title:"双色风",key:"twoTone",list:[]},x=[m,U,V];for(const n in ne){const e={label:n,value:n,component:ne[n]};n.endsWith("Outlined")?m.list.push(e):n.endsWith("Filled")?U.list.push(e):n.endsWith("TwoTone")&&V.list.push(e)}const _=[{title:"菜单名称",dataIndex:"title"},{title:"name",dataIndex:"name"},{title:"图标",dataIndex:"icon"},{title:"path",dataIndex:"path"},{title:"页面组件",dataIndex:"component"},{title:"权限",dataIndex:"permission"},{title:"渲染菜单",dataIndex:"renderMenu",customRender:n=>n.record.renderMenu?"是":"否"},{width:140,title:"操作",align:"center",dataIndex:"operation"}],g=T(()=>{const n=e=>e.map(p=>({title:p.title,value:p.id,children:p.children&&n(p.children)}));return n(f.value)}),C=w(!1),t=je({id:void 0,pid:void 0,menu_type:"page",name:"",title:void 0,icon:void 0,badge:void 0,target:"_self",path:"",component:"",renderMenu:!0,permission:void 0,cacheable:!0}),I=w();te(()=>t.pid,n=>{var p;if(!n)return;const e=(S,B)=>{for(const r of B){if(r.name===S)return r;if(r.children){const d=e(S,r.children);if(d)return d}}};{const S=e(n,f.value);t.path=S.path+"/"+(t.name||""),(p=I.value)==null||p.focus()}});const M=w(),A=w(!1);function E(){var n;A.value=!0,(n=M.value)==null||n.validate().then(()=>{t.id?R.menuController.update({id:t.id},t):R.menuController.store(t),C.value=!1}).finally(()=>{A.value=!1})}const O=w("新增菜单"),v=w("component"),L={component:{props:"component",placeholder:"请输入需要渲染的页面组件"},iframe:{props:"link",placeholder:"请输入链接地址"},link:{props:"link",placeholder:"请输入链接地址"}};te(v,n=>{n==="component"?(t.component=void 0,t.target="_self",t.link=void 0,M.value.clearValidate(["link"])):n==="link"?(t.component="link",t.target="_blank",M.value.clearValidate(["component"])):n==="iframe"&&(t.component="iframe",t.target="_self",M.value.clearValidate(["component"]))});const z=c("edit",function(n){var e;(e=M.value)==null||e.resetFields(),t.id=n.id,t.name=n.name,t.title=n.title,t.path=n.path,t.component=n.component,t.icon=n.icon,t.badge=n.badge,t.link=n.link,t.target=n.target,t.renderMenu=n.renderMenu,t.permission=n.permission,t.pid=n.pid,v.value=t.component==="LinkView"?"link":t.component==="iframe"?"iframe":"component",C.value=!0,O.value="编辑菜单"});function P(){var n;(n=M.value)==null||n.resetFields(),t.id=void 0,t.name="",t.title=void 0,t.path="",t.component="",t.icon=void 0,t.renderMenu=!1,t.permission=void 0,C.value=!0,O.value="新增菜单"}const F=c("delete",function(n){R.menuController.destroy({id:n.id})}),i=We(),s=n=>{console.log(n,"--handleMenuType")},{menuList:f}=Je(i);return Ee(()=>{R.menuController.list()}),(n,e)=>{const p=ie("PlusOutlined"),S=Se,B=we,r=Ie,d=Me,k=Le,ue=$e,G=Ue,X=Be,h=Te,re=oe,pe=Ve,de=Ae,Y=Oe,me=ze,ve=Ne,fe=De,_e=Pe("auth");return y(),N("div",nt,[o(r,{rowKey:"id",columns:_,dataSource:q(f),pagination:{pageSize:20,current:1,total:10}},{title:l(()=>[D("div",ot,[e[14]||(e[14]=a(`
          菜单列表
          `)),D("div",lt,[o(S,{type:"primary",onClick:P},{icon:l(()=>[o(p)]),default:l(()=>[e[13]||(e[13]=a(`
              新增
            `))]),_:1})])])]),bodyCell:l(({text:u,record:K,index:at,column:ee})=>[ee.dataIndex==="operation"?(y(),N(j,{key:0},[o(S,{class:"text-xs",type:"primary",size:"small",onClick:ce=>q(z)(K)},{default:l(()=>e[15]||(e[15]=[a("编辑")])),_:2},1032,["onClick"]),e[17]||(e[17]=a()),o(B,{title:"确认删除？",onConfirm:ce=>q(F)(K)},{default:l(()=>[Ge((y(),$(S,{class:"text-xs ml-base",danger:"",size:"small"},{default:l(()=>e[16]||(e[16]=[a("删除")])),_:1})),[[_e,void 0,"delete"]])]),_:2},1032,["onConfirm"])],64)):ee.dataIndex==="icon"?(y(),$(J(K.icon),{key:1})):Q("",!0)]),_:1},8,["dataSource"]),e[43]||(e[43]=a()),o(fe,{okButtonProps:{loading:A.value},width:"540px",visible:C.value,"onUpdate:visible":e[12]||(e[12]=u=>C.value=u),title:O.value,onOk:E},{default:l(()=>[o(ve,{ref_key:"form",ref:M,model:t,labelCol:{span:5},wrapperCol:{span:16,offset:1}},{default:l(()=>[o(k,{required:"",name:"name",label:"name"},{default:l(()=>[o(d,{value:t.name,"onUpdate:value":e[0]||(e[0]=u=>t.name=u)},null,8,["value"])]),_:1}),e[33]||(e[33]=a()),o(k,{required:"",name:"path",label:"path"},{default:l(()=>[o(d,{ref_key:"pathInput",ref:I,value:t.path,"onUpdate:value":e[1]||(e[1]=u=>t.path=u)},null,8,["value"])]),_:1}),e[34]||(e[34]=a()),o(k,{required:"",name:"title",label:"菜单标题"},{default:l(()=>[o(d,{value:t.title,"onUpdate:value":e[2]||(e[2]=u=>t.title=u)},null,8,["value"])]),_:1}),e[35]||(e[35]=a()),o(k,{name:"pid",label:"父级菜单"},{default:l(()=>[o(ue,{"tree-default-expand-all":"",placeholder:"设置父级菜单",value:t.pid,"onUpdate:value":e[3]||(e[3]=u=>t.pid=u),treeData:g.value},null,8,["value","treeData"])]),_:1}),e[36]||(e[36]=a()),o(k,{name:"icon",label:"菜单图标"},{default:l(()=>[o(tt,{column:6,options:x,mode:"single",value:t.icon,"onUpdate:value":e[4]||(e[4]=u=>t.icon=u)},null,8,["value"])]),_:1}),e[37]||(e[37]=a()),o(k,{name:"menu_type",label:"菜单类型"},{default:l(()=>[o(X,{value:t.menu_type,"onUpdate:value":e[5]||(e[5]=u=>t.menu_type=u),onChange:s},{default:l(()=>[o(G,{value:"menu"},{default:l(()=>e[19]||(e[19]=[a("菜单")])),_:1}),e[22]||(e[22]=a()),o(G,{value:"page"},{default:l(()=>e[20]||(e[20]=[a("页面")])),_:1}),e[23]||(e[23]=a()),o(G,{value:"button"},{default:l(()=>e[21]||(e[21]=[a("按钮")])),_:1})]),_:1},8,["value"])]),_:1}),e[38]||(e[38]=a()),o(k,{required:"",name:L[v.value].props,wrapperCol:{span:21,offset:1}},{default:l(()=>[o(de,{compact:""},{default:l(()=>[o(pe,null,{default:l(()=>[o(re,{value:v.value,"onUpdate:value":e[6]||(e[6]=u=>v.value=u),style:{width:"106px"}},{default:l(()=>[o(h,{value:"component"},{default:l(()=>e[24]||(e[24]=[a("页面组件")])),_:1}),e[27]||(e[27]=a()),o(h,{value:"iframe"},{default:l(()=>e[25]||(e[25]=[a("iframe")])),_:1}),e[28]||(e[28]=a()),o(h,{value:"link"},{default:l(()=>e[26]||(e[26]=[a("外链")])),_:1})]),_:1},8,["value"])]),_:1}),e[29]||(e[29]=a()),o(d,{value:t[L[v.value].props],"onUpdate:value":e[7]||(e[7]=u=>t[L[v.value].props]=u),placeholder:L[v.value].placeholder?L[v.value].placeholder:"@/components/layout/BlankView.vue",style:{width:"calc(100% - 106px)"}},null,8,["value","placeholder"])]),_:1})]),_:1},8,["name"]),e[39]||(e[39]=a()),o(k,{name:"badge",label:"菜单徽标"},{default:l(()=>[o(d,{value:t.badge,"onUpdate:value":e[8]||(e[8]=u=>t.badge=u)},null,8,["value"])]),_:1}),e[40]||(e[40]=a()),o(k,{name:"permission",label:"权限校验"},{default:l(()=>[o(d,{value:t.permission,"onUpdate:value":e[9]||(e[9]=u=>t.permission=u)},null,8,["value"])]),_:1}),e[41]||(e[41]=a()),o(k,{required:"",name:"target",label:"打开窗口"},{default:l(()=>[o(X,{disabled:v.value==="link"||v.value==="iframe",value:t.target,"onUpdate:value":e[10]||(e[10]=u=>t.target=u)},{default:l(()=>[o(Y,{value:"_self"},{default:l(()=>e[30]||(e[30]=[a("当前窗口")])),_:1}),e[32]||(e[32]=a()),o(Y,{value:"_blank"},{default:l(()=>e[31]||(e[31]=[a("新窗口")])),_:1})]),_:1},8,["disabled","value"])]),_:1}),e[42]||(e[42]=a()),o(k,{required:"",name:"renderMenu",label:"渲染菜单"},{default:l(()=>[o(me,{checked:t.renderMenu,"onUpdate:checked":e[11]||(e[11]=u=>t.renderMenu=u),"checked-children":"是","un-checked-children":"否"},null,8,["checked"])]),_:1})]),_:1},8,["model"])]),_:1},8,["okButtonProps","visible","title"])])}}});export{an as default};
//# sourceMappingURL=index.4a1d5d7d.1753605037589.js.map
