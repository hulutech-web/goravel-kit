{"version":3,"file":"index.vue_vue_type_script_setup_true_lang.bc4af16c.1753605037589.js","sources":["../../src/components/employee-sel/index.vue"],"sourcesContent":["<template>\n  <div style=\"min-width: 400px;display: flex\">\n    <a-select v-model:value=\"user_id\" :filter-option=\"false\"\n              :not-found-content=\"state.fetching ? undefined : null\"\n              :disabled=\"disabled\"\n              allow-clear\n              style=\"width: 100%\"\n              @change=\"change\" show-search @search=\"handleSearch\"\n              :options=\"selEmployees\">\n      <template v-if=\"state.fetching\" #notFoundContent>\n        <a-spin size=\"small\"/>\n      </template>\n    </a-select>\n    <slot name=\"default\">\n\n    </slot>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {debounce} from 'lodash-es';\nimport Api from \"@/api\"\n\nconst emit = defineEmits([\"update:modelValue\"]);\n/*定义组件名字*/\nconst props = defineProps({\n  modelValue: {\n    type: Number,\n    default: null,\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  }\n});\nconst user_id = ref(props.modelValue);\nconst selEmployees = ref([]);\n\n\nlet lastFetchId = 0;\nconst state = reactive({\n  data: [],\n  value: [],\n  fetching: false,\n});\nconst handleSearch = debounce(async (value) => {\n  // console.log('fetching user', value);\n  state.fetching = true;\n  let data = await Api.coachController.option({username: value});\n  if (data) {\n    selEmployees.value = data;\n  }\n  // console.log(selEmployees.value)\n  state.fetching = false;\n},);\n\n\nwatch(\n    () => props.modelValue,\n    (newValue) => {\n      if (newValue) {\n        user_id.value = newValue;\n        handleSearch();\n      }\n    },\n    {\n      deep: true,\n      immediate: true,\n    }\n);\nconst change = (val) => {\n  emit(\"update:modelValue\", val);\n};\n</script>\n\n<style scoped></style>\n"],"names":["emit","__emit","props","__props","user_id","ref","selEmployees","state","reactive","handleSearch","debounce","value","data","Api","watch","newValue","change","val"],"mappings":"kfAuBA,MAAAA,EAAAC,EAEAC,EAAAC,EAUAC,EAAAC,EAAAH,EAAA,UAAA,EACAI,EAAAD,EAAA,CAAA,CAAA,EAIAE,EAAAC,EAAA,CAAuB,KAAA,CAAA,EACd,MAAA,CAAA,EACC,SAAA,EACE,CAAA,EAEZC,EAAAC,EAAA,MAAAC,GAAA,CAEEJ,EAAA,SAAA,GACA,IAAAK,EAAA,MAAAC,EAAA,gBAAA,OAAA,CAAA,SAAAF,CAAA,CAAA,EACAC,IACEN,EAAA,MAAAM,GAGFL,EAAA,SAAA,EAAiB,CAAA,EAInBO,EAAA,IAAAZ,EAAA,WACgBa,GAAA,CAEVA,IACEX,EAAA,MAAAW,EACAN,IACF,EACF,CACA,KAAA,GACQ,UAAA,EACK,CACb,EAEJ,MAAAO,EAAAC,GAAA,CACEjB,EAAA,oBAAAiB,CAAA,CAA6B"}