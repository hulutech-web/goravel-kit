import{i as A,H as I,J as N,g as D}from"./ant-design-vue.00fd9e7c.1753605037589.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_lang.44ffc11e.1753605037589.js";import{A as y}from"./index-a4f0172e.js";import"./vxe-pc-ui.ed308165.1753605037589.js";import{a as T}from"./vue-router.9360959a.1753605037589.js";import{d as j,r as d,e as F,a1 as _,Z as C,_ as H,c as o,a3 as a,I as e,a5 as l,u as m,a2 as J,j as M}from"./@vue.3ad65df9.1753605037589.js";import{V as Z}from"./@vxe-ui.1c5cc959.1753605037589.js";import"./@babel.ff5fac95.1753605037589.js";import"./resize-observer-polyfill.0f9f8adb.1753605037589.js";import"./vue-types.ef06c517.1753605037589.js";import"./@ant-design.002a57d7.1753605037589.js";import"./@ctrl.110cde02.1753605037589.js";import"./dom-align.ecb06dd6.1753605037589.js";import"./lodash-es.3d27f5e2.1753605037589.js";import"./dayjs.d60d73bd.1753605037589.js";import"./async-validator.dee29e8b.1753605037589.js";import"./scroll-into-view-if-needed.583c97c5.1753605037589.js";import"./compute-scroll-into-view.183f845a.1753605037589.js";import"./pinia.11f4bfaa.1753605037589.js";import"./vue-demi.71ba0ef2.1753605037589.js";import"./axios.dcb3bfcc.1753605037589.js";import"./qs.247a6393.1753605037589.js";import"./side-channel.9d8f1847.1753605037589.js";import"./es-errors.c75f5a96.1753605037589.js";import"./object-inspect.0fbacf7d.1753605037589.js";import"./side-channel-list.c76608c5.1753605037589.js";import"./side-channel-map.76c430fe.1753605037589.js";import"./get-intrinsic.7d53f00e.1753605037589.js";import"./es-object-atoms.11ea1ab9.1753605037589.js";import"./math-intrinsics.9389030e.1753605037589.js";import"./gopd.30775706.1753605037589.js";import"./es-define-property.27915812.1753605037589.js";import"./has-symbols.76fb15e9.1753605037589.js";import"./get-proto.757e385d.1753605037589.js";import"./dunder-proto.05150bcd.1753605037589.js";import"./call-bind-apply-helpers.0833f3e9.1753605037589.js";import"./function-bind.61637ca6.1753605037589.js";import"./hasown.67f3f833.1753605037589.js";import"./call-bound.09054f06.1753605037589.js";import"./side-channel-weakmap.4b9abb6a.1753605037589.js";import"./stepin.df3b4e80.1753605037589.js";import"./enquire.js.29d23a08.1753605037589.js";import"./lodash.5999789d.1753605037589.js";import"./js-cookie.df2f1d76.1753605037589.js";import"./@vueuse.60746e97.1753605037589.js";import"./clipboard.f49c93fb.1753605037589.js";import"./highlight.js.1f23b1ae.1753605037589.js";import"./nprogress.dafb99c9.1753605037589.js";import"./vxe-table.a5304289.1753605037589.js";import"./xe-utils.0b26132f.1753605037589.js";import"./dom-zindex.d72a3c32.1753605037589.js";import"./vue-pick-colors.10d84206.1753605037589.js";import"./@popperjs.f3391c26.1753605037589.js";import"./vue.5e2bff9c.1753605037589.js";const Gt=j({__name:"manage",setup(q){const U=T(),v=d(U.params.id),k="https://hongyu.cyou",r=d({name:"",captain_id:"",sport_type:"",establishment_date:"",members_count:"",team_level:"",logo:"",motto:"",contact_phone:"",achievement:"",images:"",members:[]}),x=async()=>{r.value=await y.teamController.show({id:v.value}),r.value.members==null&&(r.value.members=[])},R=d([{name:"新增",code:"add",status:"primary"},{name:"删除",code:"del",status:"error"},{name:"保存",code:"save",status:"success"}]),$=async({code:p,$event:t})=>{switch(p){case"add":r.value.members.push({user_id:0,username:""});break;case"del":const u=c.value,s=u.getCheckboxRecords();if(s.length>0){console.log(s);let i=s.map(b=>({id:b.id,username:b.username}));u.removeCheckboxRow(),await y.teamController.syncUser({id:v.value},{members:i}),await x()}else Z.modal.message({content:"未选择数据",status:"info"});r.value.members=r.value.members.filter(i=>i.id!==t.target.dataset.id);break;case"save":await y.teamController.syncUser({id:v.value},{members:r.value.members});break}};x();const c=d(null),w=d(null);return F(()=>{const p=c.value,t=w.value;p&&t&&p.connect(t)}),(p,t)=>{const u=A,s=I,i=_("vxe-image"),b=N,B=_("vxe-toolbar"),f=_("vxe-column"),V=E,S=D,z=_("vxe-table");return C(),H("div",null,[o(u,null,{default:a(()=>t[0]||(t[0]=[e("队伍")])),_:1}),t[15]||(t[15]=e()),o(b,{size:"small",bordered:"",layout:"vertical",column:6},{default:a(()=>[o(s,{label:"队名"},{default:a(()=>[e(l(m(r).name),1)]),_:1}),t[1]||(t[1]=e()),o(s,{label:"运动类型"},{default:a(()=>[e(l(m(r).sport_type),1)]),_:1}),t[2]||(t[2]=e()),o(s,{label:"成立时间"},{default:a(()=>[e(l(m(r).establishment_date),1)]),_:1}),t[3]||(t[3]=e()),o(s,{label:"成员数"},{default:a(()=>[e(l(m(r).members_count),1)]),_:1}),t[4]||(t[4]=e()),o(s,{label:"竞技水平"},{default:a(()=>[e(l(m(r).team_level),1)]),_:1}),t[5]||(t[5]=e()),o(s,{label:"团队宣言"},{default:a(()=>[e(l(m(r).motto),1)]),_:1}),t[6]||(t[6]=e()),o(s,{label:"团队成就"},{default:a(()=>[e(l(m(r).achievement),1)]),_:1}),t[7]||(t[7]=e()),o(s,{label:"联系电话"},{default:a(()=>[e(l(m(r).contact_phone),1)]),_:1}),t[8]||(t[8]=e()),m(r).logo?(C(),J(s,{key:0,label:"logo",span:2},{default:a(()=>[o(i,{src:`${m(k)}/uploads/${m(r).logo}`,width:"48",height:"48"},null,8,["src"])]),_:1})):M("",!0),t[9]||(t[9]=e()),o(s,{label:"创建时间"},{default:a(()=>[e(l(m(r).created_at),1)]),_:1})]),_:1}),t[16]||(t[16]=e()),o(u,null,{default:a(()=>t[10]||(t[10]=[e("成员")])),_:1}),t[17]||(t[17]=e()),o(B,{ref_key:"toolbarRef",ref:w,buttons:m(R),onButtonClick:$},null,8,["buttons"]),t[18]||(t[18]=e()),o(z,{size:"small",ref_key:"tableRef",ref:c,keepSource:!0,border:"","cell-config":{height:64},"show-overflow":"","edit-config":{mode:"row",trigger:"click",showStatus:!0},data:m(r).members},{default:a(()=>[o(f,{type:"checkbox",width:"60"}),t[12]||(t[12]=e()),o(f,{field:"id",title:"用户"},{default:a(({row:n})=>[o(V,{id:n.id,"onUpdate:id":g=>n.id=g,username:n.username,"onUpdate:username":g=>n.username=g},null,8,["id","onUpdate:id","username","onUpdate:username"])]),_:1}),t[13]||(t[13]=e()),o(f,{field:"avatar",title:"头像"},{default:a(({row:n})=>[o(i,{src:`${m(k)}/uploads${n.avatar}`,width:"48",height:"48"},null,8,["src"])]),_:1}),t[14]||(t[14]=e()),o(f,{field:"action",title:"操作"},{action:a(({row:n})=>[o(S,{type:"primary",danger:"",size:"small"},{default:a(()=>t[11]||(t[11]=[e("删除")])),_:1})]),_:1})]),_:1},8,["data"])])}}});export{Gt as default};
//# sourceMappingURL=manage.0a02f8c9.1753605037589.js.map
