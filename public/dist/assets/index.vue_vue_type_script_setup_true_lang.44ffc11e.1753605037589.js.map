{"version":3,"file":"index.vue_vue_type_script_setup_true_lang.44ffc11e.1753605037589.js","sources":["../../src/components/user-select/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div>\n      <a-button type=\"primary\" shape=\"round\" @click=\"openModal = true\">\n        <template #icon>\n          <UserOutlined/>\n        </template>\n      </a-button>\n      <span class=\"font-bold text-gray-500 text-small\">\n        【会员编号：{{ props.id }}\n        姓名：{{ props.username }}】\n      </span>\n    </div>\n    <div class=\"mt-1\">\n      <a-modal v-model:visible=\"openModal\" width=\"600px\" title=\"选择会员\" centered>\n        <a-input-search v-model:value=\"username\" enter-button @search=\"fillData\" placeholder=\"请输入名字或手机号\"/>\n        <div class=\"mt-3\">\n          <a-table :dataSource=\"dataSource\" :columns=\"columns\" size=\"small\" bordered>\n            <template #bodyCell=\"{ column, record }\">\n              <template v-if=\"column.key == 'action'\">\n                <a-button type=\"primary\" @click=\"selectOne(record)\">\n                  <CheckOutlined/>\n                  选择\n                </a-button>\n              </template>\n            </template>\n          </a-table>\n        </div>\n      </a-modal>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport Api from \"@/api\"\n\nconst dataSource = ref([]);\nconst props = defineProps({\n  id: {\n    type: Number,\n    default: 0,\n  },\n  username: {\n    type: String,\n    default: \"\",\n  },\n});\n\nconst columns = [\n  {\n    dataIndex: \"id\",\n    title: \"会员ID\",\n    key: \"id\",\n  },\n  {\n    dataIndex: \"username\",\n    title: \"会员姓名\",\n    key: \"username\",\n  },\n  {\n    dataIndex: \"phone\",\n    title: \"电话\",\n    key: \"phone\",\n  },\n  {\n    dataIndex: \"action\",\n    title: \"操作\",\n    key: \"action\",\n    width: 100,\n  },\n];\n\nconst username = ref(\"\");\n\n\nconst fillData = async () => {\n  const {data} = await Api.userController.index({username: username.value});\n  dataSource.value = data;\n};\nconst openModal = ref(false);\n\n/*监听openModal的执行，当为true时才开启网络加载数据*/\nwatch(openModal,(val)=>{\n  if(val){\n    fillData()\n  }\n})\nconst emit = defineEmits([\"update:id\", \"update:username\"]);\nconst selectOne = (row) => {\n  console.log(row)\n  //提交数据到父组件\n  emit(\"update:id\", row.id);\n  emit(\"update:username\", row.username);\n  openModal.value = false;\n};\n</script>\n\n<style scoped></style>"],"names":["dataSource","ref","props","__props","columns","username","fillData","data","Api","openModal","watch","val","emit","__emit","selectOne","row"],"mappings":"4fAoCA,MAAAA,EAAAC,EAAA,CAAA,CAAA,EACAC,EAAAC,EAWAC,EAAA,CAAgB,CACd,UAAA,KACa,MAAA,OACJ,IAAA,IACF,EACP,CACA,UAAA,WACa,MAAA,OACJ,IAAA,UACF,EACP,CACA,UAAA,QACa,MAAA,KACJ,IAAA,OACF,EACP,CACA,UAAA,SACa,MAAA,KACJ,IAAA,SACF,MAAA,GACE,CACT,EAGFC,EAAAJ,EAAA,EAAA,EAGAK,EAAA,SAAA,CACE,KAAA,CAAA,KAAAC,CAAA,EAAA,MAAAC,EAAA,eAAA,MAAA,CAAA,SAAAH,EAAA,KAAA,CAAA,EACAL,EAAA,MAAAO,CAAmB,EAErBE,EAAAR,EAAA,EAAA,EAGAS,EAAAD,EAAAE,GAAA,CACEA,GACEL,GACF,CAAA,EAEF,MAAAM,EAAAC,EACAC,EAAAC,GAAA,CACE,QAAA,IAAAA,CAAA,EAEAH,EAAA,YAAAG,EAAA,EAAA,EACAH,EAAA,kBAAAG,EAAA,QAAA,EACAN,EAAA,MAAA,EAAkB;;;;;"}